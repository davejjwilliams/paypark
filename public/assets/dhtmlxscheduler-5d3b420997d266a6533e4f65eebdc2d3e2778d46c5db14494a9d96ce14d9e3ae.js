!function(){function dtmlXMLLoaderObject(t,e,i,n){return this.xmlDoc="",this.async=void 0===i||i,this.onloadAction=t||null,this.mainObject=e||null,this.waitCall=null,this.rSeed=n||!1,this}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this)}function _dhtmlxError(){return this.catches||(this.catches=[]),this}function dhtmlXHeir(t,e){for(var i in e)"function"==typeof e[i]&&(t[i]=e[i]);return t}window.dhtmlx||(window.dhtmlx=function(t){for(var e in t)dhtmlx[e]=t[e];return dhtmlx}),dhtmlx.extend_api=function(t,n,e){var a=window[t];a&&(window[t]=function(t){var e;if(t&&"object"==typeof t&&!t.tagName){for(var i in e=a.apply(this,n._init?n._init(t):arguments),dhtmlx)n[i]&&this[n[i]](dhtmlx[i]);for(var i in t)n[i]?this[n[i]](t[i]):0===i.indexOf("on")&&this.attachEvent(i,t[i])}else e=a.apply(this,arguments);return n._patch&&n._patch(this),e||this},window[t].prototype=a.prototype,e&&dhtmlXHeir(window[t].prototype,e))},window.dhtmlxAjax={get:function(t,e){var i=new dtmlXMLLoaderObject(!0);return i.async=arguments.length<3,i.waitCall=e,i.loadXML(t),i},post:function(t,e,i){var n=new dtmlXMLLoaderObject(!0);return n.async=arguments.length<4,n.waitCall=i,n.loadXML(t,!0,e),n},getSync:function(t){return this.get(t,null,!0)},postSync:function(t,e){return this.post(t,e,null,!0)}},window.dtmlXMLLoaderObject=dtmlXMLLoaderObject,dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(t){var e=!0;return this.check=function(){if(t&&t.onloadAction&&(!t.xmlDoc.readyState||4==t.xmlDoc.readyState)){if(!e)return;e=!1,dtmlXMLLoaderObject.count++,"function"==typeof t.onloadAction&&t.onloadAction(t.mainObject,null,null,null,t),t.waitCall&&(t.waitCall.call(this,t),t.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(t,e){var i;if(this.xmlDoc.responseXML){if(0===(n=this.xmlDoc.responseXML.getElementsByTagName(t)).length&&-1!=t.indexOf(":"))var n=this.xmlDoc.responseXML.getElementsByTagName(t.split(":")[1]);i=n[0]}else i=this.xmlDoc.documentElement;if(i)return this._retry=!1,i;if(this._retry||!_isIE)return dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),document.createElement("div");this._retry=!0;e=this.xmlDoc;return this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(t,e)},dtmlXMLLoaderObject.prototype.loadXMLString=function(t,e){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(t);else{var i=new DOMParser;this.xmlDoc=i.parseFromString(t,"text/xml")}e||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(t,e,i,n){this.rSeed&&(t+=(-1!=t.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=t,!_isIE&&window.XMLHttpRequest?this.xmlDoc=new XMLHttpRequest:this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),"string"==typeof e?this.xmlDoc.open(e,t,this.async):this.xmlDoc.open(e?"POST":"GET",t,this.async),n?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):e&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(i),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;e._tagvalue=t.firstChild?t.firstChild.nodeValue:"";for(i=0;i<t.childNodes.length;i++){var n=t.childNodes[i].tagName;n&&(e[n]||(e[n]=[]),e[n].push(this.xmlNodeToJSON(t.childNodes[i])))}return e},window.dhtmlDragAndDropObject=dhtmlDragAndDropObject,dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){if(!t&&!window.event||2!=(t||event).button)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault||(t.preventDefault(),1)))},dhtmlDragAndDropObject.prototype.callDrag=function(t){t||(t=window.event);var e=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-e.downtime<100)){if(!e.dragNode){if(!e.waitDrag)return e.stopDrag(t,!0);if(e.dragNode=e.dragStartObject._createDragNode(e.dragStartNode,t),!e.dragNode)return e.stopDrag();e.dragNode.onselectstart=function(){return!1},e.gldragNode=e.dragNode,document.body.appendChild(e.dragNode),document.body.onmouseup=e.stopDrag,e.waitDrag=0,e.dragNode.pWindow=window,e.initFrameRoute()}if(e.dragNode.parentNode!=window.document.body&&e.gldragNode){var i=e.gldragNode;e.gldragNode.old&&(i=e.gldragNode.old),i.parentNode.removeChild(i);var n=e.dragNode.pWindow;if(i.pWindow&&i.pWindow.dhtmlDragAndDrop.lastLanding&&i.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(i.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var a=document.createElement("div");a.innerHTML=e.dragNode.outerHTML,e.dragNode=a.childNodes[0]}else e.dragNode=e.dragNode.cloneNode(!0);e.dragNode.pWindow=window,e.gldragNode.old=e.dragNode,document.body.appendChild(e.dragNode),n.dhtmlDragAndDrop.dragNode=e.dragNode}var r;e.dragNode.style.left=t.clientX+15+(e.fx?-1*e.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",e.dragNode.style.top=t.clientY+3+(e.fy?-1*e.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",r=t.srcElement?t.srcElement:t.target,e.checkLanding(r,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*a.split("_")[0],n+=1*a.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){var i=window.dhtmlDragAndDrop;if(!e){i.stopFrameRoute();var n=i.lastLanding;i.lastLanding=null,n&&n.dragLanding._drag(i.dragStartNode,i.dragStartObject,n,_isIE?event.srcElement:t.target)}i.lastLanding=null,i.dragNode&&i.dragNode.parentNode==document.body&&i.dragNode.parentNode.removeChild(i.dragNode),i.dragNode=0,i.gldragNode=0,i.fx=0,i.fy=0,i.dragStartNode=0,i.dragStartObject=0,document.body.onmouseup=i.tempDOMU,document.body.onmousemove=i.tempDOMM,i.tempDOMU=null,i.tempDOMM=null,i.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}};var _isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1;-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),525<_KHTMLrv?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,-1==navigator.appVersion.indexOf("MSIE 8.0")&&-1==navigator.appVersion.indexOf("MSIE 9.0")&&-1==navigator.appVersion.indexOf("MSIE 10.0")||"BackCompat"==document.compatMode||(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(t,e,i,n){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(t,e);if(_isIE)return e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),i&&e.setProperty("SelectionNamespaces","xmlns:xsl='"+i+"'"),"single"==n?e.selectSingleNode(t):e.selectNodes(t)||new Array(0);var a=e;e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),-1!=e.nodeName.indexOf("document")?a=e:e=(a=e).ownerDocument;var r=XPathResult.ANY_TYPE;"single"==n&&(r=XPathResult.FIRST_ORDERED_NODE_TYPE);var s=[],o=e.evaluate(t,a,function(){return i},r,null);if(r==XPathResult.FIRST_ORDERED_NODE_TYPE)return o.singleNodeValue;for(var d=o.iterateNext();d;)s[s.length]=d,d=o.iterateNext();return s},_dhtmlxError.prototype.catchError=function(t,e){this.catches[t]=e},_dhtmlxError.prototype.throwError=function(t,e,i){return this.catches[t]?this.catches[t](t,e,i):this.catches.ALL?this.catches.ALL(t,e,i):(window.alert("Error type: "+t+"\nDescription: "+e),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(t,e){var i=t.replace(/[\/]+/gi,"/").split("/"),n=null,a=1;if(!i.length)return[];if("."==i[0])n=[e];else{if(""!==i[0])return[];n=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(i[a].replace(/\[[^\]]*\]/g,"")),a++}for(;a<i.length;a++)n=this._getAllNamedChilds(n,i[a]);return-1!=i[a-1].indexOf("[")&&(n=this._filterXPath(n,i[a-1])),n},dtmlXMLLoaderObject.prototype._filterXPath=function(t,e){for(var i=[],n=(e=e.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),0);n<t.length;n++)t[n].getAttribute(e)&&(i[i.length]=t[n]);return i},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(t,e){var i=[];_isKHTML&&(e=e.toUpperCase());for(var n=0;n<t.length;n++)for(var a=0;a<t[n].childNodes.length;a++)_isKHTML?t[n].childNodes[a].tagName&&t[n].childNodes[a].tagName.toUpperCase()==e&&(i[i.length]=t[n].childNodes[a]):t[n].childNodes[a].tagName==e&&(i[i.length]=t[n].childNodes[a]);return i},void 0===window.dhtmlxEvent&&(window.dhtmlxEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}),dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(t,e,i){i||(i=this.xslDoc),i.responseXML&&(i=i.responseXML);var n=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+t+"']",i,"http://www.w3.org/1999/XSL/Transform","single");n&&(n.firstChild.nodeValue=e)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(t,e){var i;if(t||(t=this.xslDoc),t.responseXML&&(t=t.responseXML),e||(e=this.xmlDoc),e.responseXML&&(e=e.responseXML),_isIE){i=new ActiveXObject("Msxml2.DOMDocument.3.0");try{e.transformNodeToObject(t,i)}catch(n){i=e.transformNode(t)}}else this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(t)),i=this.XSLProcessor.transformToDocument(e);return i},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(t,e){var i=this.doXSLTransToObject(t,e);return"string"==typeof i?i:this.doSerialization(i)},dtmlXMLLoaderObject.prototype.doSerialization=function(t){return t||(t=this.xmlDoc),t.responseXML&&(t=t.responseXML),_isIE?t.xml:(new XMLSerializer).serializeToString(t)},window.dhtmlxEventable=function(obj){obj.attachEvent=function(t,e,i){return this[t="ev_"+t.toLowerCase()]||(this[t]=new this.eventCatcher(i||this)),t+":"+this[t].addEvent(e)},obj.callEvent=function(t,e){return!this[t="ev_"+t.toLowerCase()]||this[t].apply(this,e)},obj.checkEvent=function(t){return!!this["ev_"+t.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var t=!0,e=0;e<dhx_catch.length;e++)if(dhx_catch[e]){var i=dhx_catch[e].apply(obj,arguments);t=t&&i}return t};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),!!ev&&dhx_catch.push(ev)-1},z.removeEvent=function(t){dhx_catch[t]=null},z},obj.detachEvent=function(t){if(t){var e=t.split(":");this[e[0]].removeEvent(e[1])}},obj.detachAllEvents=function(){for(var t in this)0===t.indexOf("ev_")&&(this.detachEvent(t),this[t]=null)},obj=null},window.dhtmlx||(window.dhtmlx={}),function(){function h(e,i){setTimeout(function(){if(e.box){var t=e.callback;o(!1),e.box.parentNode.removeChild(e.box),dhtmlx.callEvent("onAfterMessagePopup",[e.box]),f=e.box=null,t&&t(i)}},1)}function s(t){if(f){var e=(t=t||event).which||event.keyCode,i=!1;if(dhtmlx.message.keyboard){if(13==e||32==e){var n=t.target||t.srcElement;-1<scheduler._getClassName(n).indexOf("dhtmlx_popup_button")&&n.click?n.click():(h(f,!0),i=!0)}27==e&&(h(f,!1),i=!0)}if(i)return t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function o(t){o.cover||(o.cover=document.createElement("div"),o.cover.onkeydown=s,o.cover.className="dhx_modal_cover",document.body.appendChild(o.cover)),document.body.scrollHeight,o.cover.style.display=t?"inline-block":"none"}function c(t,e,i){return"<div "+scheduler._waiAria.messageButtonAttrString(t)+"class='dhtmlx_popup_button dhtmlx_"+(i||t||"").toLowerCase().replace(/ /g,"_")+"_button' result='"+e+"' ><div>"+t+"</div></div>"}function a(t){g.area||(g.area=document.createElement("div"),g.area.className="dhtmlx_message_area",g.area.style[g.position]="5px",document.body.appendChild(g.area)),g.hide(t.id);var e=document.createElement("div");return e.innerHTML="<div>"+t.text+"</div>",e.className="dhtmlx-info dhtmlx-"+t.type,e.onclick=function(){g.hide(t.id),t=null},scheduler._waiAria.messageInfoAttr(e),"bottom"==g.position&&g.area.firstChild?g.area.insertBefore(e,g.area.firstChild):g.area.appendChild(e),0<t.expire&&(g.timers[t.id]=window.setTimeout(function(){g.hide(t.id)},t.expire)),g.pull[t.id]=e,e=null,t.id}function d(a,t,e){var i=document.createElement("div");i.className=" dhtmlx_modal_box dhtmlx-"+a.type,i.setAttribute("dhxbox",1);var n=scheduler.uid();scheduler._waiAria.messageModalAttr(i,n);var r="",s=!1;if(a.width&&(i.style.width=a.width),a.height&&(i.style.height=a.height),a.title&&(r+='<div class="dhtmlx_popup_title" id="'+n+'">'+a.title+"</div>",s=!0),r+='<div class="dhtmlx_popup_text" '+(s?"":' id="'+n+'" ')+"><span>"+(a.content?"":a.text)+'</span></div><div  class="dhtmlx_popup_controls">',t){var o=a.ok||scheduler.locale.labels.message_ok;void 0===o&&(o="OK"),r+=c(o,!0,"ok")}if(e){var d=a.cancel||scheduler.locale.labels.message_cancel;void 0===d&&(d="Cancel"),r+=c(d,!1,"cancel")}if(a.buttons)for(var l=0;l<a.buttons.length;l++)r+=c(a.buttons[l],l);if(r+="</div>",i.innerHTML=r,a.content){var _=a.content;"string"==typeof _&&(_=document.getElementById(_)),"none"==_.style.display&&(_.style.display=""),i.childNodes[a.title?1:0].appendChild(_)}return i.onclick=function(t){var e=(t=t||event).target||t.srcElement,i=scheduler._getClassName(e);if(i||(e=e.parentNode),"dhtmlx_popup_button"==(i=scheduler._getClassName(e)).split(" ")[0]){var n=e.getAttribute("result");h(a,n="true"==n||"false"!=n&&n)}},a.box=i,f=a,i}function e(t,e,i){var n=t.tagName?t:d(t,e,i);t.hidden||o(!0),document.body.appendChild(n);var a=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-n.offsetWidth)/2)),r=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-n.offsetHeight)/2));return"top"==t.position?n.style.top="-3px":n.style.top=r+"px",n.style.left=a+"px",n.onkeydown=s,dhtmlx.modalbox.focus(n),t.hidden&&dhtmlx.modalbox.hide(n),dhtmlx.callEvent("onMessagePopup",[n]),n}function r(t){return e(t,!0,!1)}function l(t){return e(t,!0,!0)}function _(t){return e(t)}function i(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}function u(t,e,i,n){return"object"!=typeof t&&(t={text:t,type:e,expire:i,id:n}),t.id=t.id||g.uid(),t.expire=t.expire||g.expire,t}var f=null;document.attachEvent?document.attachEvent("onkeydown",s):document.addEventListener("keydown",s,!0),dhtmlx.alert=function(){var t=i.apply(this,arguments);return t.type=t.type||"confirm",r(t)},dhtmlx.confirm=function(){var t=i.apply(this,arguments);return t.type=t.type||"alert",l(t)},dhtmlx.modalbox=function(){var t=i.apply(this,arguments);return t.type=t.type||"alert",_(t)},dhtmlx.modalbox.hide=function(t){for(;t&&t.getAttribute&&!t.getAttribute("dhxbox");)t=t.parentNode;t&&(t.parentNode.removeChild(t),o(!1))},dhtmlx.modalbox.focus=function(e){setTimeout(function(){var t=scheduler._getFocusableNodes(e);t.length&&t[0].focus&&t[0].focus()},1)};var g=dhtmlx.message=function(t,e,i,n){switch((t=u.apply(this,arguments)).type=t.type||"info",t.type.split("-")[0]){case"alert":return r(t);case"confirm":return l(t);case"modalbox":return _(t);default:return a(t)}};g.seed=(new Date).valueOf(),g.uid=function(){return g.seed++},g.expire=4e3,g.keyboard=!0,g.position="top",g.pull={},g.timers={},g.hideAll=function(){for(var t in g.pull)g.hide(t)},g.hide=function(t){var e=g.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",g.timers[t]&&window.clearTimeout(g.timers[t]),delete g.pull[t])}}(),dhtmlx.attachEvent||dhtmlxEventable(dhtmlx);var dataProcessor=window.dataProcessor=function(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this};dataProcessor.prototype={setTransactionMode:function(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,void 0!==t.headers&&(this._headers=t.headers),void 0!==t.payload&&(this._payload=t.payload)):(this._tMode=t,this._tSend=e),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"==this._tMode&&(this._tSend=!1,this._endnm=!0,this._headers=this._headers||{},this._headers["Content-type"]="application/json")},escape:function(t){return this._utf?encodeURIComponent(t):escape(t)},enableUTFencoding:function(t){this._utf=!!t},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=!!t},enablePartialDataSend:function(t){this._changed=!!t},setUpdateMode:function(t,e){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=e},ignore:function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},setUpdated:function(t,e,i){if(!this._silent_mode){var n=this.findRow(t);i=i||"updated";var a=this.obj.getUserData(t,this.action_param);a&&"updated"==i&&(i=a),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.obj.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.obj.setUserData(t,this.action_param,"")),e||this._clearUpdateFlag(t),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},_clearUpdateFlag:function(){},markRow:function(t,e,i){var n="",a=this.is_invalid(t);if(a&&(n=this.styles[a],e=!0),this.callEvent("onRowMark",[t,e,i,a])&&(n=this.styles[e?i:"clear"]+n,this.obj[this._methods[0]](t,n),a&&a.details)){n+=this.styles[a+"_cell"];for(var r=0;r<a.details.length;r++)a.details[r]&&this.obj[this._methods[1]](t,r,n)}},getState:function(t){return this.obj.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},checkBeforeUpdate:function(){return!0},sendData:function(t){if(!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),void 0===t||this._tSend)return this.sendAllData();if(this._in_progress[t])return!1;if(this.messages=[],!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))return!1;this._beforeSendData(this._getRowData(t),t)}},_beforeSendData:function(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)},serialize:function(t,e){if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");var i=[],n=[];for(var a in t)t.hasOwnProperty(a)&&(i.push(this.serialize_one(t[a],a+this.post_delim)),n.push(a));return i.push("ids="+this.escape(n.join(","))),(scheduler.security_key||dhtmlx.security_key)&&i.push("dhx_security="+(scheduler.security_key||dhtmlx.security_key)),i.join("&")},serialize_one:function(t,e){if("string"==typeof t)return t;var i=[];for(var n in t)if(t.hasOwnProperty(n)){if(("id"==n||n==this.action_param)&&"REST"==this._tMode)continue;i.push(this.escape((e||"")+n)+"="+this.escape(t[n]))}return i.join("&")},_applyPayload:function(t){var e=this.obj.$ajax;if(this._payload)for(var i in this._payload)t=t+e.urlSeparator(t)+this.escape(i)+"="+this.escape(this._payload[i]);return t},_sendData:function(n,a){if(n){if(!this.callEvent("onBeforeDataSending",a?[a,this.getState(a),n]:[null,null,n]))return!1;a&&(this._in_progress[a]=(new Date).valueOf());var r=this,t=function(t){var e=[];if(a)e.push(a);else if(n)for(var i in n)e.push(i);return r.afterUpdate(r,t,e)},e=this.obj.$ajax,i=this.serverProcessor+(this._user?e.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),s=this._applyPayload(i);if("GET"==this._tMode)e.query({url:s+e.urlSeparator(s)+this.serialize(n,a),method:"GET",callback:t,headers:this._headers});else if("POST"==this._tMode)e.query({url:s,method:"POST",headers:this._headers,data:this.serialize(n,a),callback:t});else if("JSON"==this._tMode){var o=n[this.action_param],d={};for(var l in n)d[l]=n[l];delete d[this.action_param],delete d.id,delete d.gr_id,e.query({url:s,method:"POST",headers:this._headers,callback:t,data:JSON.stringify({id:a,action:o,data:d})})}else if("REST"==this._tMode){var _=this.getState(a),h=i.replace(/(\&|\?)editing\=true/,""),c=(d="","post");"inserted"==_?d=this.serialize(n,a):("deleted"==_?c="DELETE":(c="PUT",d=this.serialize(n,a)),h=h+("/"==h.slice(-1)?"":"/")+a),h=this._applyPayload(h),e.query({url:h,method:c,headers:this._headers,data:d,callback:t})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var t=!0,e=0;e<this.updatedRows.length;e++)t&=this.checkBeforeUpdate(this.updatedRows[e]);if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(e=0;e<this.updatedRows.length;e++)if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(){for(var t={},e=!1,i=0;i<this.updatedRows.length;i++){var n=this.updatedRows[i];if(!this._in_progress[n]&&!this.is_invalid(n)){var a=this._getRowData(n);this.callEvent("onBeforeUpdate",[n,this.getState(n),a])&&(t[n]=a,e=!0,this._in_progress[n]=(new Date).valueOf())}}return e?t:null},setVerificator:function(t,e){this.mandatoryFields[t]=e||function(t){return""!==t}},clearVerificator:function(t){this.mandatoryFields[t]=!1},findRow:function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},defineAction:function(t,e){this._uActions||(this._uActions=[]),this._uActions[t]=e},afterUpdateCallback:function(t,e,i,n){var a=t,r="error"!=i&&"invalid"!=i;if(r||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[a];"wait"!=this._in_progress[a]&&this.setUpdated(t,!1);var s=t;switch(i){case"inserted":case"insert":e!=t&&(this.setUpdated(t,!1),this.obj[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj[this._methods[3]](t,e),delete this._in_progress[a],this.callEvent("onAfterUpdate",[t,i,e,n])}"wait"!=this._in_progress[a]?(r&&this.obj.setUserData(t,this.action_param,""),delete this._in_progress[a]):(delete this._in_progress[a],this.setUpdated(e,!0,this.obj.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[s,i,e,n])},_errorResponse:function(t,e){return this.obj&&this.obj.callEvent&&this.obj.callEvent("onSaveError",[e,t.xmlDoc]),this.cleanUpdate(e)},afterUpdate:function(t,e,i){var n=this.obj.$ajax;if(200===e.xmlDoc.status){if(window.JSON){var a;try{a=JSON.parse(e.xmlDoc.responseText)}catch(t){e.xmlDoc.responseText.length||(a={})}if(a){var r=a.action||this.getState(i)||"updated",s=a.sid||i[0],o=a.tid||i[0];return t.afterUpdateCallback(s,o,r,a),void t.finalizeUpdate()}}var d=n.xmltop("data",e.xmlDoc);if(!d)return this._errorResponse(e,i);var l=n.xpath("//data/action",d);l.length||this._errorResponse(e,i);for(var _=0;_<l.length;_++){var h=l[_];r=h.getAttribute("type"),s=h.getAttribute("sid"),o=h.getAttribute("tid");t.afterUpdateCallback(s,o,r,h)}t.finalizeUpdate()}else this._errorResponse(e,i)},cleanUpdate:function(t){if(t)for(var e=0;e<t.length;e++)delete this._in_progress[t[e]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){this.obj=t,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},enableDebug:function(){},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(t,e,i,n){this.afterAutoUpdate(t,e,i,n)}),this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},t)},afterAutoUpdate:function(t,e){return"collision"!=e||!(this._need_update=!0)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,e){var i=this.obj.$ajax;if(this._update_busy)return!1;this._update_busy=!0,i.get(t,e)},_v:function(t){return t.firstChild?t.firstChild.nodeValue:""},_a:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this._v(t[i]);return e},loadUpdate:function(){var o=this.obj.$ajax,d=this,t=this.obj.getUserData(0,"version"),e=this.serverProcessor+o.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+t].join("&");e=e.replace("editing=true&",""),this.getUpdates(e,function(t){var e=o.xpath("//userdata",t);d.obj.setUserData(0,"version",d._v(e[0]));var i=o.xpath("//update",t);if(i.length){d._silent_mode=!0;for(var n=0;n<i.length;n++){var a=i[n].getAttribute("status"),r=i[n].getAttribute("id"),s=i[n].getAttribute("parent");switch(a){case"inserted":d.callEvent("insertCallback",[i[n],r,s]);break;case"updated":d.callEvent("updateCallback",[i[n],r,s]);break;case"deleted":d.callEvent("deleteCallback",[i[n],r,s])}}d._silent_mode=!1}d._update_busy=!1,d=null})}},window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(t){this.init_original(t),(t._dataprocessor=this).setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"}),dhtmlxError.catchError("LoadXML",function(t,e,i){var n=i[0].responseText;switch(scheduler.config.ajax_error){case"alert":window.alert(n);break;case"console":window.console.log(n)}});var Scheduler={_seed:0,plugin:function(t){this._schedulerPlugins.push(t),t(window.scheduler)},_schedulerPlugins:[],getSchedulerInstance:function(){function n(t){var e=document.createElement("div");return(t||"").split(" ").forEach(function(t){e.classList.add(t)}),e}function a(t){var e;if(t.view)switch(t.view){case"today":case"next":case"prev":e=m.builtInButton;break;case"date":e=m.date;break;case"spacer":e=m.spacer;break;case"button":e=m.button;break;default:e=m.view}else t.rows?e=m.rows_container:t.cols&&(e=m.row);return e}function o(t){var e=a(t);if(e){var i=e(t);if(t.css&&i.classList.add(t.css),t.width)(n=t.width)===1*n&&(n+="px"),i.style.width=n;if(t.height)(n=t.height)===1*n&&(n+="px"),i.style.height=n;if(t.click&&i.addEventListener("click",t.click),t.html&&(i.innerHTML=t.html),t.align){var n="";"right"==t.align?n="flex-end":"left"==t.align&&(n="flex-start"),i.style.justifyContent=n}return i}}function d(t){return"string"==typeof t&&(t={view:t}),t.view||t.rows||t.cols||(t.view="button"),t}function l(t){var e,i=document.createDocumentFragment();e=Array.isArray(t)?t:[t];for(var n=0;n<e.length;n++){var a,r=d(e[n]);if("day"===r.view&&e[n+1])"week"!==(a=d(e[n+1])).view&&"month"!==a.view||(r.$firstTab=!0);if("month"===r.view&&e[n-1])"week"!==(a=d(e[n-1])).view&&"day"!==a.view||(r.$lastTab=!0);var s=o(r);i.appendChild(s),(r.cols||r.rows)&&s.appendChild(l(r.cols||r.rows))}return i}function r(t){return!!(t.querySelector(".dhx_cal_header")&&t.querySelector(".dhx_cal_data")&&t.querySelector(".dhx_cal_navline"))}function s(e){var i=["day","week","month"],t=["date"],n=["prev","today","next"];if(e.matrix)for(var a in e.matrix)i.push(a);if(e._props)for(var a in e._props)i.push(a);if(e._grid&&e._grid.names)for(var a in e._grid.names)i.push(a);return["map","agenda","week_agenda","year"].forEach(function(t){e[t+"_view"]&&i.push(t)}),i.concat(t).concat(n)}function _(t){return Array.isArray?Array.isArray(t):t&&void 0!==t.length&&t.pop&&t.push}function h(t){
return t&&"object"==typeof t&&"function String() { [native code] }"===Function.prototype.toString.call(t.constructor)}function c(t){return t&&"object"==typeof t&&"function Number() { [native code] }"===Function.prototype.toString.call(t.constructor)}function u(t){return t&&"object"==typeof t&&"function Boolean() { [native code] }"===Function.prototype.toString.call(t.constructor)}function f(t){return!(!t||"object"!=typeof t||!(t.getFullYear&&t.getMonth&&t.getDate))}function t(){if(void 0===D){var t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>",document.body.appendChild(t);var e=window.getComputedStyle(t.querySelector(".dhx_cal_scale_placeholder")).getPropertyValue("position");D="absolute"===e,setTimeout(function(){D=null},500)}return D}function e(){if(k._is_material_skin())return!0;if(void 0!==E)return E;var t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>",document.body.appendChild(t);var e=window.getComputedStyle(t.querySelector(".dhx_body")).getPropertyValue("box-sizing");document.body.removeChild(t),(E=!("border-box"!==e))||setTimeout(function(){E=void 0},1e3)}function i(){if(!k._is_material_skin()&&!k._border_box_events()){var t=E;D=E=void 0,t!==e()&&k.$container&&k.setCurrentView()}}var k={version:"5.3.6"},g={agenda:"https://docs.dhtmlx.com/scheduler/agenda_view.html",grid:"https://docs.dhtmlx.com/scheduler/grid_view.html",map:"https://docs.dhtmlx.com/scheduler/map_view.html",unit:"https://docs.dhtmlx.com/scheduler/units_view.html",timeline:"https://docs.dhtmlx.com/scheduler/timeline_view.html",week_agenda:"https://docs.dhtmlx.com/scheduler/weekagenda_view.html",year:"https://docs.dhtmlx.com/scheduler/year_view.html",anythingElse:"https://docs.dhtmlx.com/scheduler/views.html"},v={agenda:"ext/dhtmlxscheduler_agenda_view.js",grid:"ext/dhtmlxscheduler_grid_view.js",map:"ext/dhtmlxscheduler_map_view.js",unit:"ext/dhtmlxscheduler_units.js",timeline:"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js",week_agenda:"ext/dhtmlxscheduler_week_agenda.js",year:"ext/dhtmlxscheduler_year_view.js",limit:"ext/dhtmlxscheduler_limit.js"};k._commonErrorMessages={unknownView:function(t){var e="Related docs: "+(g[t]||g.anythingElse),i=v[t]?"You're probably missing "+v[t]+".":"";return"`"+t+"` view is not defined. \nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \n"+e+"\n"+(i?i+"\n":"")},collapsedContainer:function(){return"Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. \nMake sure that the container has some initial height or use different units. For example:\n<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> \n"}},k.createTimelineView=function(){throw new Error("scheduler.createTimelineView is not implemented. Be sure to add the required extension: "+v.timeline+"\nRelated docs: "+g.timeline)},k.createUnitsView=function(){throw new Error("scheduler.createUnitsView is not implemented. Be sure to add the required extension: "+v.unit+"\nRelated docs: "+g.unit)},k.createGridView=function(){throw new Error("scheduler.createGridView is not implemented. Be sure to add the required extension: "+v.grid+"\nRelated docs: "+g.grid)},k.addMarkedTimespan=function(){throw new Error("scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js\nRelated docs: https://docs.dhtmlx.com/scheduler/limits.html")},k.renderCalendar=function(){throw new Error("scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js\nhttps://docs.dhtmlx.com/scheduler/minicalendar.html")},k.exportToPNG=function(){throw new Error(["scheduler.exportToPNG is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},k.exportToPDF=function(){throw new Error(["scheduler.exportToPDF is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join("\n"))},dhtmlxEventable(k);var m={rows_container:function(){return n("dhx_cal_navbar_rows_container")},row:function(){return n("dhx_cal_navbar_row")},view:function(t){var e=n("dhx_cal_tab");return e.setAttribute("name",t.view+"_tab"),e.setAttribute("data-viewname",t.view),k.config.fix_tab_position&&(t.$firstTab?e.classList.add("dhx_cal_tab_first"):t.$lastTab?e.classList.add("dhx_cal_tab_last"):"week"!==t.view&&e.classList.add("dhx_cal_tab_standalone")),e},date:function(){return n("dhx_cal_date")},button:function(){return n("dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab")},builtInButton:function(t){return n("dhx_cal_"+t.view+"_button dhx_cal_nav_button")},spacer:function(){return n("dhx_cal_line_spacer")},html_element:function(){return n("dhx_cal_nav_content")}};k._init_nav_bar=function(t){var e=this.$container.querySelector(".dhx_cal_navline");return e||((e=document.createElement("div")).className="dhx_cal_navline dhx_cal_navline_flex",k._update_nav_bar(t,e),e)};var p=null,x=null;k._update_nav_bar=function(t,e){if(t){var i=!1,n=!1,a=t.height||k.xy.nav_height;null!==x&&x===a||(i=!0),p&&JSON.stringify(t)===p||(n=!0),i&&(k.xy.nav_height=a),n&&(e.innerHTML="",e.appendChild(l(t))),(i||n)&&(k._els=[],k.get_elements(),k.set_actions()),e.style.display=0===a?"none":"",x=a}},k._detachDomEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},k._init_once=function(){function e(t){for(var e=document.body;t&&t!=e;)t=t.parentNode;return!(e!=t)}function i(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}function n(t,e){return t.w==e.w&&t.h==e.h}var a=i();k.event(window,"resize",function(){e(k._obj)&&(window.clearTimeout(k._resize_timer),k._resize_timer=window.setTimeout(function(){var t=i();if(!n(a,t)){if(!e(k._obj))return;k.callEvent("onSchedulerResize",[])&&(k.updateView(),k.callEvent("onAfterSchedulerResize",[]))}a=t},100))}),k._init_once=function(){}};var b,y={navbar:{render:function(t){return k._init_nav_bar(t)}},header:{render:function(){var t=document.createElement("div");return t.className="dhx_cal_header",t}},dataArea:{render:function(){var t=document.createElement("div");return t.className="dhx_cal_data",t}},html_element:{render:function(t){return t.html}}};if(k.init=function(t,e,i){if(e=e||k._currentDate(),i=i||"week",this._obj&&this.unset_actions(),this._obj="string"==typeof t?document.getElementById(t):t,this.$container=this._obj,!this.$container.offsetHeight&&this.$container.offsetWidth&&"100%"===this.$container.style.height&&window.console.error(k._commonErrorMessages.collapsedContainer(),this.$container),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this.config.header||r(this.$container)||(this.config.header=s(this),console.log(["Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.","Using a default header configuration: ","scheduler.config.header = "+JSON.stringify(this.config.header,null,2),"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html"].join("\n"))),this.config.header)this.$container.innerHTML="",this.$container.classList.add("dhx_cal_container"),this.config.header.height&&(this.xy.nav_height=this.config.header.height),this.$container.appendChild(y.navbar.render(this.config.header)),this.$container.appendChild(y.header.render()),this.$container.appendChild(y.dataArea.render());else if(!r(this.$container))throw new Error(["Required DOM elements are missing from the scheduler container.","Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup","Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig"].join("\n"));this.config.rtl&&(this.$container.className+=" dhx_cal_container_rtl"),this._skin_init&&k._skin_init(),k.date.init(),this._scroll=!0,this._quirks=this.$env.isIE&&"BackCompat"==document.compatMode,this._quirks7=this.$env.isIE&&-1==navigator.appVersion.indexOf("MSIE 8"),this._els=[],this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),k.callEvent("onSchedulerReady",[]),this.setCurrentView(e,i)},k.xy={min_event_height:40,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},k.keys={edit_save:13,edit_cancel:27},k.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},k.set_sizes=function(){var t=this._x=this._obj.clientWidth-this.xy.margin_left,e=this._y=this._obj.clientHeight-this.xy.margin_top,i=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,n=this._table_view?-1:this.xy.scale_width,a=this.$container.querySelector(".dhx_cal_scale_placeholder");k._is_material_skin()?(a||((a=document.createElement("div")).className="dhx_cal_scale_placeholder",this.$container.insertBefore(a,this._els.dhx_cal_header[0])),a.style.display="block",this.set_xy(a,t,this.xy.scale_height+1,0,this.xy.nav_height+(this._quirks?-1:1))):a&&a.parentNode.removeChild(a),this._lightbox&&(k.$container.offsetWidth<1200||this._setLbPosition(document.querySelector(".dhx_cal_light"))),this.set_xy(this._els.dhx_cal_navline[0],t,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],t-i,this.xy.scale_height,n,this.xy.nav_height+(this._quirks?-1:1));var r=this._els.dhx_cal_navline[0].offsetHeight;0<r&&(this.xy.nav_height=r);var s=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);this.set_xy(this._els.dhx_cal_data[0],t,e-(s+2),0,s+2)},k.set_xy=function(t,e,i,n,a){var r="left";t.style.width=Math.max(0,e)+"px",t.style.height=Math.max(0,i)+"px",3<arguments.length&&(this.config.rtl&&(r="right"),t.style[r]=n+"px",t.style.top=a+"px")},k.get_elements=function(){for(var t=this._obj.getElementsByTagName("DIV"),e=0;e<t.length;e++){var i=k._getClassName(t[e]),n=t[e].getAttribute("name")||"";i&&(i=i.split(" ")[0]),this._els[i]||(this._els[i]=[]),this._els[i].push(t[e]);var a=k.locale.labels[n||i];"string"!=typeof a&&n&&!t[e].innerHTML&&(a=n.split("_")[0]),a&&(this._waiAria.labelAttr(t[e],a),t[e].innerHTML=a)}},k.unset_actions=function(){for(var t in this._els)if(this._click[t])for(var e=0;e<this._els[t].length;e++)this._els[t][e].onclick=null;this._obj.onselectstart=null,this._obj.onmousemove=null,this._obj.onmousedown=null,this._obj.onmouseup=null,this._obj.ondblclick=null,this._obj.oncontextmenu=null},k.set_actions=function(){for(var t in this._els)if(this._click[t])for(var e=0;e<this._els[t].length;e++)this._els[t][e].onclick=k._click[t];this._obj.onselectstart=function(){return!1},this._obj.onmousemove=function(t){k._temp_touch_block||k._on_mouse_move(t||event)},this._obj.onmousedown=function(t){k._ignore_next_click||k._on_mouse_down(t||event)},this._obj.onmouseup=function(t){k._ignore_next_click||k._on_mouse_up(t||event)},this._obj.ondblclick=function(t){k._on_dbl_click(t||event)},this._obj.oncontextmenu=function(t){var e=t||event,i=e.target||e.srcElement;return k.callEvent("onContextMenu",[k._locate_event(i),e])}},k.select=function(t){this._select_id!=t&&(k._close_not_saved(),this.editStop(!1),this.unselect(),this._select_id=t,this.updateEvent(t))},k.unselect=function(t){if(!t||t==this._select_id){var e=this._select_id;this._select_id=null,e&&this.getEvent(e)&&this.updateEvent(e)}},k.getState=function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}},k._click={dhx_cal_data:function(t){if(k._ignore_next_click)return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,k._ignore_next_click=!1;var e=t?t.target:event.srcElement,i=k._locate_event(e);if(t=t||event,i){if(!k.callEvent("onClick",[i,t])||k.config.readonly)return}else k.callEvent("onEmptyClick",[k.getActionData(t).date,t]);if(i&&k.config.select){k.select(i);var n=k._getClassName(e);-1!=n.indexOf("_icon")&&k._click.buttons[n.split(" ")[1].replace("icon_","")](i)}else k._close_not_saved(),500<(new Date).valueOf()-(k._new_event||0)&&k.unselect()},dhx_cal_prev_button:function(){k._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(t,e){var i=1;k.config.rtl&&(e=-e,i=-i),k.setCurrentView(k.date.add(k.date[k._mode+"_start"](new Date(k._date)),e||i,k._mode))},dhx_cal_today_button:function(){k.callEvent("onBeforeTodayDisplayed",[])&&k.setCurrentView(k._currentDate())},dhx_cal_tab:function(){var t=this.getAttribute("name"),e=t.substring(0,t.search("_tab"));k.setCurrentView(k._date,e)},buttons:{"delete":function(t){var e=k.locale.labels.confirm_deleting;k._dhtmlx_confirm(e,k.locale.labels.title_confirm_deleting,function(){k.deleteEvent(t)})},edit:function(t){k.edit(t)},save:function(){k.editStop(!0)},details:function(t){k.showLightbox(t)},cancel:function(){k.editStop(!1)}}},k._dhtmlx_confirm=function(t,e,i){if(!t)return i();var n={text:t};e&&(n.title=e),i&&(n.callback=function(t){t&&i()}),dhtmlx.confirm(n)},k.addEventNow=function(t,e,i){var n={};k._isObject(t)&&!k._isDate(t)&&(n=t,t=null);var a=6e4*(this.config.event_duration||this.config.time_step);t||(t=n.start_date||Math.round(k._currentDate().valueOf()/a)*a);var r=new Date(t);if(!e){var s=this.config.first_hour;s>r.getHours()&&(r.setHours(s),t=r.valueOf()),e=t.valueOf()+a}var o=new Date(e);r.valueOf()==o.valueOf()&&o.setTime(o.valueOf()+a),n.start_date=n.start_date||r,n.end_date=n.end_date||o,n.text=n.text||this.locale.labels.new_event,n.id=this._drag_id=n.id||this.uid(),this._drag_mode="new-size",this._loading=!0;var d=this.addEvent(n);return this.callEvent("onEventCreated",[this._drag_id,i]),this._loading=!1,this._drag_event={},this._on_mouse_up(i),d},k._on_dbl_click=function(t,e){if(e=e||t.target||t.srcElement,!this.config.readonly){var i=k._getClassName(e).split(" ")[0];switch(i){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!k.config.dblclick_create)break;this.addEventNow(this.getActionData(t).date,null,t);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":var n=this._locate_event(e);if(!this.callEvent("onDblClick",[n,t]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(n)._timed||!this.config.select?this.showLightbox(n):this.edit(n);break;case"dhx_time_block":case"dhx_cal_container":return;default:var a=this["dblclick_"+i];if(a)a.call(this,t);else if(e.parentNode&&e!=this)return k._on_dbl_click(t,e.parentNode)}}},k._get_column_index=function(t){var e=0;if(this._cols){for(var i=0,n=0;i+this._cols[n]<t&&n<this._cols.length;)i+=this._cols[n],n++;if(e=n+(this._cols[n]?(t-i)/this._cols[n]:0),this._ignores&&e>=this._cols.length)for(;1<=e&&this._ignores[Math.floor(e)];)e--}return e},k._week_indexes_from_pos=function(t){if(this._cols){var e=this._get_column_index(t.x);return t.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(e)-1)),t.y=Math.max(0,Math.ceil(60*t.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),t}return t},k._mouse_coords=function(t){var e,i=document.body,n=document.documentElement;e=this.$env.isIE||!t.pageX&&!t.pageY?{x:t.clientX+(i.scrollLeft||n.scrollLeft||0)-i.clientLeft,y:t.clientY+(i.scrollTop||n.scrollTop||0)-i.clientTop}:{x:t.pageX,y:t.pageY},this.config.rtl&&this._colsS?(e.x=this.$container.querySelector(".dhx_cal_data").offsetWidth-e.x,"month"!==this._mode&&(e.x-=this.xy.scale_width)):e.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width),e.y-=this.$domHelpers.getAbsoluteTop(this._obj)+this.xy.nav_height+(this._dy_shift||0)+this.xy.scale_height-this._els.dhx_cal_data[0].scrollTop,e.ev=t;var a=this["mouse_"+this._mode];if(a)e=a.call(this,e);else if(this._table_view){var r=this._get_column_index(e.x);if(!this._cols||!this._colsS)return e;var s=0;for(s=1;s<this._colsS.heights.length&&!(this._colsS.heights[s]>e.y);s++);e.y=Math.ceil(24*(Math.max(0,r)+7*Math.max(0,s-1))*60/this.config.time_step),(k._drag_mode||"month"==this._mode)&&(e.y=24*(Math.max(0,Math.ceil(r)-1)+7*Math.max(0,s-1))*60/this.config.time_step),"move"==this._drag_mode&&k._ignores_detected&&k.config.preserve_length&&(e._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),e.x=0}else e=this._week_indexes_from_pos(e);return e.timestamp=+new Date,e},k._close_not_saved=function(){if(500<(new Date).valueOf()-(k._new_event||0)&&k._edit_id){var t=k.locale.labels.confirm_closing;k._dhtmlx_confirm(t,k.locale.labels.title_confirm_closing,function(){k.editStop(k.config.positive_closing)}),t&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},k._correct_shift=function(t,e){return t-6e4*(new Date(k._min_date).getTimezoneOffset()-new Date(t).getTimezoneOffset())*(e?-1:1)},k._is_pos_changed=function(t,e){function i(t,e,i){return!!(Math.abs(t-e)>i)}if(!t||!this._drag_pos)return!0;var n=5;return!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||100<e.timestamp-this._drag_pos.timestamp||i(t.ev.clientX,e.ev.clientX,n)||i(t.ev.clientY,e.ev.clientY,n))},k._correct_drag_start_date=function(t){var e;k.matrix&&(e=k.matrix[k._mode]),e=e||{x_step:1,x_unit:"day"},t=new Date(t);var i=1;return(e._start_correction||e._end_correction)&&(i=60*(e.last_hour||0)-(60*t.getHours()+t.getMinutes())||1),1*t+(k._get_fictional_event_length(t,i,e)-i)},k._correct_drag_end_date=function(t,e){var i;k.matrix&&(i=k.matrix[k._mode]),i=i||{x_step:1,x_unit:"day"};var n=1*t+k._get_fictional_event_length(t,e,i);return new Date(1*n-(k._get_fictional_event_length(n,-1,i,-1)+1))},k._on_mouse_move=function(t){if(this._drag_mode){var e=this._mouse_coords(t);if(this._is_pos_changed(this._drag_pos,e)){var i,n;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var a=null;if(this._drag_pos&&!this._drag_pos.has_moved&&((a=this._drag_pos).has_moved=!0),this._drag_pos=e,this._drag_pos.has_moved=!0,"create"==this._drag_mode){if(a&&(e=a),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,i=this._get_date_from_pos(e).valueOf(),!this._drag_start)return this.callEvent("onBeforeEventCreated",[t,this._drag_id])?(this._loading=!1,void(this._drag_start=i)):void(this._loading=!1);n=i,this._drag_start;var r=new Date(this._drag_start),s=new Date(n);"day"!=this._mode&&"week"!=this._mode||r.getHours()!=s.getHours()||r.getMinutes()!=s.getMinutes()||(s=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(r,s,this.locale.labels.new_event,this._drag_id,e.fields),this.callEvent("onEventCreated",[this._drag_id,t]),this._loading=!1,this._drag_mode="new-size"}var o,d=this.config.time_step,l=this.getEvent(this._drag_id);if(k.matrix&&(o=k.matrix[k._mode]),o=o||{x_step:1,x_unit:"day"},"move"==this._drag_mode)i=this._min_date.valueOf()+6e4*(e.y*this.config.time_step+24*e.x*60),!e.custom&&this._table_view&&(i+=1e3*this.date.time_part(l.start_date)),!this._table_view&&this._dragEventBody&&void 0===this._drag_event._move_event_shift&&(this._drag_event._move_event_shift=i-l.start_date),this._drag_event._move_event_shift&&(i-=this._drag_event._move_event_shift),i=this._correct_shift(i),e._ignores&&this.config.preserve_length&&this._table_view?(i=k._correct_drag_start_date(i),n=k._correct_drag_end_date(i,this._drag_event._event_length)):n=l.end_date.valueOf()-(l.start_date.valueOf()-i);else{if(i=l.start_date.valueOf(),n=l.end_date.valueOf(),this._table_view){var _=this._min_date.valueOf()+e.y*this.config.time_step*6e4+(e.custom?0:864e5);if("month"==this._mode)if(_=this._correct_shift(_,!1),this._drag_from_start){var h=864e5;_<=k.date.date_part(new Date(n+h-1)).valueOf()&&(i=_-h)}else n=_;else this.config.preserve_length?e.resize_from_start?i=k._correct_drag_start_date(_):n=k._correct_drag_end_date(_,0):e.resize_from_start?i=_:n=_}else{var c=this.date.date_part(new Date(l.end_date.valueOf()-1)).valueOf(),u=new Date(c),f=this.config.first_hour,g=60/d*(this.config.last_hour-f);this.config.time_step=1;var v=this._mouse_coords(t);this.config.time_step=d;var m=e.y*d*6e4,p=Math.min(e.y+1,g)*d*6e4,x=6e4*v.y;n=Math.abs(m-x)>Math.abs(p-x)?c+p:c+m,n+=6e4*(new Date(n).getTimezoneOffset()-u.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize","week"!=this._mode&&"day"!=this._mode||(n=this._correct_shift(n))}if("new-size"==this._drag_mode)if(n<=this._drag_start){var b=e.shift||(this._table_view&&!e.custom?864e5:0);i=n-(e.shift?0:b),n=this._drag_start+(b||6e4*d)}else i=this._drag_start;else n<=i&&(n=i+6e4*d)}var y=new Date(n-1),w=new Date(i);if("move"==this._drag_mode&&k.config.limit_drag_out&&(+w<+k._min_date||+n>+k._max_date)){if(+l.start_date<+k._min_date||+l.end_date>+k._max_date)w=new Date(l.start_date),n=new Date(l.end_date);else{var D=n-w;+w<+k._min_date?(w=new Date(k._min_date),e._ignores&&this.config.preserve_length&&this._table_view?(w=new Date(k._correct_drag_start_date(w)),o._start_correction&&(w=new Date(w.valueOf()+o._start_correction)),n=new Date(1*w+this._get_fictional_event_length(w,this._drag_event._event_length,o))):n=new Date(+w+D)):(n=new Date(k._max_date),e._ignores&&this.config.preserve_length&&this._table_view?(o._end_correction&&(n=new Date(n.valueOf()-o._end_correction)),n=new Date(1*n-this._get_fictional_event_length(n,0,o,!0)),w=new Date(1*n-this._get_fictional_event_length(n,this._drag_event._event_length,o,!0)),this._ignores_detected&&(w=k.date.add(w,o.x_step,o.x_unit),n=new Date(1*n-this._get_fictional_event_length(n,0,o,!0)),n=k.date.add(n,o.x_step,o.x_unit))):w=new Date(+n-D))}y=new Date(n-1)}if(!this._table_view&&this._dragEventBody&&!k.config.all_timed&&(!k._get_section_view()&&e.x!=this._get_event_sday({start_date:new Date(i),end_date:new Date(i)})||new Date(i).getHours()<this.config.first_hour)){D=n-w;if("move"==this._drag_mode){h=this._min_date.valueOf()+24*e.x*60*6e4;(w=new Date(h)).setHours(this.config.first_hour),n=new Date(w.valueOf()+D),y=new Date(n-1)}}if(!this._table_view&&!k.config.all_timed&&(!k.getView()&&e.x!=this._get_event_sday({start_date:new Date(n),end_date:new Date(n)})||new Date(n).getHours()>=this.config.last_hour)){D=n-w,h=this._min_date.valueOf()+24*e.x*60*6e4;(n=k.date.date_part(new Date(h))).setHours(this.config.last_hour),y=new Date(n-1),"move"==this._drag_mode&&(w=new Date(+n-D))}if(this._table_view||y.getDate()==w.getDate()&&y.getHours()<this.config.last_hour||k._allow_dnd)if(l.start_date=w,l.end_date=new Date(n),this.config.update_render){var E=k._els.dhx_cal_data[0].scrollTop;this.update_view(),k._els.dhx_cal_data[0].scrollTop=E}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(t){t.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,t])}}else if(k.checkEvent("onMouseMove")){var A=this._locate_event(t.target||t.srcElement);this.callEvent("onMouseMove",[A,t])}},k._on_mouse_down=function(t,e){if(2!=t.button&&!this.config.readonly&&!this._drag_mode){e=e||t.target||t.srcElement;var i=k._getClassName(e).split(" ")[0];switch(this.config.drag_event_body&&"dhx_body"==i&&e.parentNode&&-1===e.parentNode.className.indexOf("dhx_cal_select_menu")&&(i="dhx_event_move",this._dragEventBody=!0),i){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize",k._getClassName(e).indexOf("dhx_event_resize_end")<0?k._drag_from_start=!0:k._drag_from_start=!1;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(e.parentNode)return k._on_mouse_down(t,e.parentNode);break;default:if((!k.checkEvent("onMouseDown")||k.callEvent("onMouseDown",[i,t]))&&e.parentNode&&e!=this&&"dhx_body"!=i)return k._on_mouse_down(t,e.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var n=this._locate_event(e);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[n,this._drag_mode,t])){if(this._drag_id=n,(this._edit_id!=this._drag_id||this._edit_id&&"create"==this._drag_mode)&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=k._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(t)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},k._get_private_properties=function(t){var e={};for(var i in t)0===i.indexOf("_")&&(e[i]=!0);return e},k._clear_temporary_properties=function(t,e){var i=this._get_private_properties(t),n=this._get_private_properties(e);for(var a in n)i[a]||delete e[a]},k._on_mouse_up=function(t){if(!t||2!=t.button||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var e=this._drag_id,i=this._drag_mode,n=!this._drag_pos||this._drag_pos.has_moved;delete this._drag_event._move_event_shift;var a=this.getEvent(this._drag_id);if(n&&(this._drag_event._dhx_changed||!this._drag_event.start_date||a.start_date.valueOf()!=this._drag_event.start_date.valueOf()||a.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var r="new-size"==this._drag_mode;if(this.callEvent("onBeforeEventChanged",[a,t,r,this._drag_event]))if(this._drag_id=this._drag_mode=null,r&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(e)))return k.callEvent("onDragEnd",[e,i,t]),this.showLightbox(e);this._drag_pos=!0,this._select_id=this._edit_id=e}else this._new_event||this.callEvent(r?"onEventAdded":"onEventChanged",[e,this.getEvent(e)]);else r?this.deleteEvent(a.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(a,this._drag_event),k._lame_copy(a,this._drag_event),this.updateEvent(a.id))}this._drag_pos&&(this._drag_pos.has_moved||!0===this._drag_pos)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),k.callEvent("onDragEnd",[e,i,t])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null}},k._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load()||(this._render_wait=!0,0))},k.update_view=function(){this._reset_ignores(),this._update_nav_bar(this.config.header,this.$container.querySelector(".dhx_cal_navline"));var t=this[this._mode+"_view"];if(t?t(!0):this._reset_scale(),this._trigger_dyn_loading())return!0;this.render_view_data()},k.isViewExists=function(t){return!!(k[t+"_view"]||k.date[t+"_start"]&&k.templates[t+"_date"]&&k.templates[t+"_scale_date"])},k._set_aria_buttons_attrs=function(){for(var t=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],e=0;e<t.length;e++)for(var i=this._els[t[e]],n=0;i&&n<i.length;n++){var a=i[n].getAttribute("name"),r=this.locale.labels[t[e]];a&&(r=this.locale.labels[a]||r),"dhx_cal_next_button"==t[e]?r=this.locale.labels.next:"dhx_cal_prev_button"==t[e]&&(r=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(i[n],r||"")}},k.updateView=function(t,e){if(!this.$container)throw new Error("The scheduler is not initialized. \n **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**");t=t||this._date,e=e||this._mode;var i="dhx_cal_data",n=this._obj,a="dhx_scheduler_"+this._mode,r="dhx_scheduler_"+e;this._mode&&-1!=n.className.indexOf(a)?n.className=n.className.replace(a,r):n.className+=" "+r;var s,o="dhx_multi_day",d=!(this._mode!=e||!this.config.preserve_scroll)&&this._els[i][0].scrollTop;this._els[o]&&this._els[o][0]&&(s=this._els[o][0].scrollTop),this[this._mode+"_view"]&&e&&this._mode!=e&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els[o]&&(this._els[o][0].parentNode.removeChild(this._els[o][0]),this._els[o]=null),this._mode=e,this._date=t,this._table_view="month"==this._mode,this._dy_shift=0,this.update_view(),this._set_aria_buttons_attrs();var l=this._els.dhx_cal_tab;if(l)for(var _=0;_<l.length;_++){var h=l[_];h.getAttribute("name")==this._mode+"_tab"?(h.classList.add("active"),this._waiAria.headerToggleState(h,!0)):(h.classList.remove("active"),this._waiAria.headerToggleState(h,!1))}"number"==typeof d&&(this._els[i][0].scrollTop=d),"number"==typeof s&&this._els[o]&&this._els[o][0]&&(this._els[o][0].scrollTop=s)},k.setCurrentView=function(t,e){this.callEvent("onBeforeViewChange",[this._mode,this._date,e||this._mode,t||this._date])&&(this.updateView(t,e),this.callEvent("onViewChange",[this._mode,this._date]))},k.render=function(t,e){k.setCurrentView(t,e)},k._render_x_header=function(t,e,i,n,a){a=a||0;var r=document.createElement("div");r.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(r.className+=" "+this.templates[this._mode+"_scalex_class"](i));var s=this._cols[t]-1;"month"==this._mode&&0===t&&this.config.left_border&&(r.className+=" dhx_scale_bar_border",e+=1),this.set_xy(r,s,this.xy.scale_height-2,e,a);var o=this.templates[this._mode+"_scale_date"](i,this._mode);r.innerHTML=o,this._waiAria.dayHeaderAttr(r,o),n.appendChild(r)},k._get_columns_num=function(t,e){var i=7;if(!k._table_view){var n=k.date["get_"+k._mode+"_end"];n&&(e=n(t)),i=Math.round((e.valueOf()-t.valueOf())/864e5)}return i},k._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},k._get_view_end=function(){var t=this._get_timeunit_start(),e=k.date.add(t,1,this._mode);if(!k._table_view){var i=k.date["get_"+k._mode+"_end"];i&&(e=i(t))}return e},k._calc_scale_sizes=function(t,e,i){var n=this.config.rtl,a=t,r=this._get_columns_num(e,i);this._process_ignores(e,r,"day",1);for(var s=r-this._ignores_detected,o=0;o<r;o++)this._ignores[o]?(this._cols[o]=0,s++):this._cols[o]=Math.floor(a/(s-o)),a-=this._cols[o],this._colsS[o]=(this._cols[o-1]||0)+(this._colsS[o-1]||(this._table_view?0:(n?this.xy.scroll_width:this.xy.scale_width)+2));this._colsS.col_length=r,this._colsS[r]=this._cols[r-1]+this._colsS[r-1]||0},k._set_scale_col_size=function(t,e,i){var n=this.config;this.set_xy(t,e-1,n.hour_size_px*(n.last_hour-n.first_hour),i+this.xy.scale_width+1,0)},k._render_scales=function(t,e){var i=new Date(k._min_date),n=new Date(k._max_date),a=this.date.date_part(k._currentDate()),r=parseInt(t.style.width,10),s=new Date(this._min_date),o=this._get_columns_num(i,n);this._calc_scale_sizes(r,i,n);var d=0;t.innerHTML="";for(var l=0;l<o;l++){if(this._ignores[l]||this._render_x_header(l,d,s,t),!this._table_view){var _=document.createElement("div"),h="dhx_scale_holder";s.valueOf()==a.valueOf()&&(h="dhx_scale_holder_now"),_.setAttribute("data-column-index",l),this._ignores_detected&&this._ignores[l]&&(h+=" dhx_scale_ignore"),_.className=h+" "+this.templates.week_date_class(s,a),this._waiAria.dayColumnAttr(_,s),this._set_scale_col_size(_,this._cols[l],d),e.appendChild(_),this.callEvent("onScaleAdd",[_,s])}d+=this._cols[l],s=this.date.add(s,1,"day"),s=this.date.day_start(s)}},k._getNavDateElement=function(){return this.$container.querySelector(".dhx_cal_date")},k._reset_scale=function(){if(this.templates[this._mode+"_date"]){var t=this._els.dhx_cal_header[0],e=this._els.dhx_cal_data[0],i=this.config;t.innerHTML="",e.innerHTML="";var n=(i.readonly||!i.drag_resize?" dhx_resize_denied":"")+(i.readonly||!i.drag_move?" dhx_move_denied":"");e.className="dhx_cal_data"+n,this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var a,r,s=this._get_timeunit_start(),o=k._get_view_end();a=r=this._table_view?k.date.week_start(s):s,this._min_date=a
;var d=this.templates[this._mode+"_date"](s,o,this._mode),l=this._getNavDateElement();if(l&&(l.innerHTML=d,this._waiAria.navBarDateAttr(l,d)),this._max_date=o,k._render_scales(t,e),this._table_view)this._reset_month_scale(e,s,r);else if(this._reset_hours_scale(e,s,r),i.multi_day){var _="dhx_multi_day";this._els[_]&&(this._els[_][0].parentNode.removeChild(this._els[_][0]),this._els[_]=null);var h=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1,c=document.createElement("div");c.className=_,c.style.visibility="hidden";var u=this._colsS[this._colsS.col_length],f=i.rtl?this.xy.scale_width:this.xy.scroll_width,g=Math.max(u+f-2,0);this.set_xy(c,g,0,0,h),e.parentNode.insertBefore(c,e);var v=c.cloneNode(!0);v.className=_+"_icon",v.style.visibility="hidden",this.set_xy(v,this.xy.scale_width,0,0,h),c.appendChild(v),this._els[_]=[c,v],this._els[_][0].onclick=this._click.dhx_cal_data}}},k._reset_hours_scale=function(t){var e=document.createElement("div");e.className="dhx_scale_holder";for(var i=new Date(1980,1,1,this.config.first_hour,0,0),n=1*this.config.first_hour;n<this.config.last_hour;n++){var a=document.createElement("div");a.className="dhx_scale_hour",a.style.height=this.config.hour_size_px+"px";var r=this.xy.scale_width;this.config.left_border&&(a.className+=" dhx_scale_hour_border"),a.style.width=r+"px";var s=k.templates.hour_scale(i);a.innerHTML=s,this._waiAria.hourScaleAttr(a,s),e.appendChild(a),i=this.date.add(i,1,"hour")}t.appendChild(e),this.config.scroll_hour&&(t.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},k._currentDate=function(){return k.config.now_date?new Date(k.config.now_date):new Date},k._reset_ignores=function(){this._ignores={},this._ignores_detected=0},k._process_ignores=function(t,e,i,n,a){this._reset_ignores();var r=k["ignore_"+this._mode];if(r)for(var s=new Date(t),o=0;o<e;o++)r(s)&&(this._ignores_detected+=1,this._ignores[o]=!0,a&&e++),s=k.date.add(s,n,i),k.date[i+"_start"]&&(s=k.date[i+"_start"](s))},k._render_month_scale=function(t,e,i,n){function a(t){var e=k._colsS.height;return void 0!==k._colsS.heights[t+1]&&(e=k._colsS.heights[t+1]-(k._colsS.heights[t]||0)),e}var r=k.date.add(e,1,"month"),s=new Date(i),o=k._currentDate();this.date.date_part(o),this.date.date_part(i),n=n||Math.ceil(Math.round((r.valueOf()-i.valueOf())/864e5)/7);for(var d=[],l=0;l<=7;l++){var _=(this._cols[l]||0)-1;0===l&&this.config.left_border&&(_-=1),d[l]=_+"px"}var h=0,c=document.createElement("table");c.setAttribute("cellpadding","0"),c.setAttribute("cellspacing","0");var u=document.createElement("tbody");c.appendChild(u);var f=[];for(l=0;l<n;l++){var g=document.createElement("tr");u.appendChild(g);for(var v=Math.max(a(l)-k.xy.month_head_height,0),m=0;m<7;m++){var p=document.createElement("td");g.appendChild(p);var x="";i<e?x="dhx_before":r<=i?x="dhx_after":i.valueOf()==o.valueOf()&&(x="dhx_now"),this._ignores_detected&&this._ignores[m]&&(x+=" dhx_scale_ignore"),p.className=x+" "+this.templates.month_date_class(i,o),p.setAttribute("data-cell-date",k.templates.format_date(i));var b="dhx_month_body",y="dhx_month_head";if(0===m&&this.config.left_border&&(b+=" dhx_month_body_border",y+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[m])p.appendChild(document.createElement("div")),p.appendChild(document.createElement("div"));else{this._waiAria.monthCellAttr(p,i);var w=document.createElement("div");w.className=y,w.innerHTML=this.templates.month_day(i),p.appendChild(w);var D=document.createElement("div");D.className=b,D.style.height=v+"px",D.style.width=d[m],p.appendChild(D)}f.push(i);var E=i.getDate();1<(i=this.date.add(i,1,"day")).getDate()-E&&(i=new Date(i.getFullYear(),i.getMonth(),E+1,12,0))}k._colsS.heights[l]=h,h+=a(l)}this._min_date=s,this._max_date=i,t.innerHTML="",t.appendChild(c),this._scales={};var A=t.getElementsByTagName("div");for(l=0;l<f.length;l++){t=A[2*l+1];var S=f[l];this._scales[+S]=t}for(l=0;l<f.length;l++){S=f[l];this.callEvent("onScaleAdd",[this._scales[+S],S])}return this._max_date},k._reset_month_scale=function(t,e,i,n){var a=k.date.add(e,1,"month"),r=k._currentDate();this.date.date_part(r),this.date.date_part(i),n=n||Math.ceil(Math.round((a.valueOf()-i.valueOf())/864e5)/7);var s=Math.floor(t.clientHeight/n)-this.xy.month_head_height;return this._colsS.height=s+this.xy.month_head_height,this._colsS.heights=[],k._render_month_scale(t,e,i,n)},k.getView=function(t){return t||(t=k.getState().mode),k.matrix&&k.matrix[t]?k.matrix[t]:k._props&&k._props[t]?k._props[t]:null},k.getLabel=function(t,e){for(var i=this.config.lightbox.sections,n=0;n<i.length;n++)if(i[n].map_to==t)for(var a=i[n].options,r=0;r<a.length;r++)if(a[r].key==e)return a[r].label;return""},k.updateCollection=function(t,e){var i=k.serverList(t);return!!i&&(i.splice(0,i.length),i.push.apply(i,e||[]),k.callEvent("onOptionsLoad",[]),k.resetLightbox(),!0)},k._lame_clone=function(t,e){var i,n,a;for(e=e||[],i=0;i<e.length;i+=2)if(t===e[i])return e[i+1];if(t&&"object"==typeof t){for(a={},n=[Array,Date,Number,String,Boolean],i=0;i<n.length;i++)t instanceof n[i]&&(a=i?new n[i](t):new n[i]);for(i in e.push(t,a),t)Object.prototype.hasOwnProperty.apply(t,[i])&&(a[i]=k._lame_clone(t[i],e))}return a||t},k._lame_copy=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},k._get_date_from_pos=function(t){var e=this._min_date.valueOf()+6e4*(t.y*this.config.time_step+24*(this._table_view?0:t.x)*60);return new Date(this._correct_shift(e))},k.getActionData=function(t){var e=this._mouse_coords(t);return{date:this._get_date_from_pos(e),section:e.section}},k._focus=function(t,e){if(t&&t.focus)if(this._mobile)window.setTimeout(function(){t.focus()},10);else try{e&&t.select&&t.offsetWidth&&t.select(),t.focus()}catch(t){}},k._get_real_event_length=function(t,e,i){var n,a=e-t,r=i._start_correction+i._end_correction||0,s=this["ignore_"+this._mode],o=0;i.render?(o=this._get_date_index(i,t),n=this._get_date_index(i,e)):n=Math.round(a/60/60/1e3/24);for(var d=!0;o<n;){var l=k.date.add(e,-i.x_step,i.x_unit);s&&s(e)&&(!d||d&&s(l))?a-=e-l:(d=!1,a-=r),e=l,n--}return a},k._get_fictional_event_length=function(t,e,i,n){var a=new Date(t),r=n?-1:1;if(i._start_correction||i._end_correction){var s;s=n?60*a.getHours()+a.getMinutes()-60*(i.first_hour||0):60*(i.last_hour||0)-(60*a.getHours()+a.getMinutes());var o=60*(i.last_hour-i.first_hour),d=Math.ceil((e/6e4-s)/o);d<0&&(d=0),e+=d*(1440-o)*60*1e3}var l,_=new Date(1*t+e*r),h=this["ignore_"+this._mode],c=0;for(i.render?(c=this._get_date_index(i,a),l=this._get_date_index(i,_)):l=Math.round(e/60/60/1e3/24);c*r<=l*r;){var u=k.date.add(a,i.x_step*r,i.x_unit);h&&h(a)&&(e+=(u-a)*r,l+=r),a=u,c+=r}return e},k._get_section_view=function(){return this.getView()},k._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},k._is_initialized=function(){var t=this.getState();return this._obj&&t.date&&t.mode},k._is_lightbox_open=function(){var t=this.getState();return null!==t.lightbox_id&&void 0!==t.lightbox_id},k._getClassName=function(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),e||""},k.event=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},k.eventRemove=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},function(){function r(t){var e=!1,i=!1;if(window.getComputedStyle){var n=window.getComputedStyle(t,null);e=n.display,i=n.visibility}else t.currentStyle&&(e=t.currentStyle.display,i=t.currentStyle.visibility);var a=!1,r=k._locate_css({target:t},"dhx_form_repeat",!1);return r&&(a=!("0px"!=r.style.height)),a=a||!t.offsetHeight,"none"!=e&&"hidden"!=i&&!a}function s(t){return!isNaN(t.getAttribute("tabindex"))&&0<=1*t.getAttribute("tabindex")}function o(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function d(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}k._getFocusableNodes=function(t){for(var e=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),i=Array.prototype.slice.call(e,0),n=0;n<i.length;n++){var a=i[n];(s(a)||d(a)||o(a))&&r(a)||(i.splice(n,1),n--)}return i}}(),k._trim=function(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)},k._isDate=function(t){return!(!t||"object"!=typeof t||!(t.getFullYear&&t.getMonth&&t.getDate))},k._isObject=function(t){return t&&"object"==typeof t},function(){function a(t){return(t+"").replace(i," ").replace(n," ")}function r(t){return(t+"").replace(s,"&#39;")}function e(){return!k.config.wai_aria_attributes}var i=new RegExp("<(?:.|\n)*?>","gm"),n=new RegExp(" +","gm"),s=new RegExp("'","gm");for(var t in k._waiAria={getAttributeString:function(t){var e=[" "];for(var i in t)if("function"!=typeof t[i]&&"object"!=typeof t[i]){var n=r(a(t[i]));e.push(i+"='"+n+"'")}return e.push(" "),e.join(" ")},setAttributes:function(t,e){for(var i in e)t.setAttribute(i,a(e[i]));return t},labelAttr:function(t,e){return this.setAttributes(t,{"aria-label":e})},label:function(t){return k._waiAria.getAttributeString({"aria-label":t})},hourScaleAttr:function(t,e){this.labelAttr(t,e)},monthCellAttr:function(t,e){this.labelAttr(t,k.templates.day_date(e))},navBarDateAttr:function(t,e){this.labelAttr(t,e)},dayHeaderAttr:function(t,e){this.labelAttr(t,e)},dayColumnAttr:function(t,e){this.dayHeaderAttr(t,k.templates.day_date(e))},headerButtonsAttributes:function(t,e){return this.setAttributes(t,{role:"button","aria-label":e})},headerToggleState:function(t,e){return this.setAttributes(t,{"aria-pressed":e?"true":"false"})},getHeaderCellAttr:function(t){return k._waiAria.getAttributeString({"aria-label":t})},eventAttr:function(t,e){this._eventCommonAttr(t,e)},_eventCommonAttr:function(t,e){e.setAttribute("aria-label",a(k.templates.event_text(t.start_date,t.end_date,t))),k.config.readonly&&e.setAttribute("aria-readonly",!0),t.$dataprocessor_class&&e.setAttribute("aria-busy",!0),e.setAttribute("aria-selected",k.getState().select_id==t.id?"true":"false")},setEventBarAttr:function(t,e){this._eventCommonAttr(t,e)},_getAttributes:function(t,e){var i={setAttribute:function(t,e){this[t]=e}};return t.apply(this,[e,i]),i},eventBarAttrString:function(t){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,t))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(t){return this.getAttributeString({role:"columnheader","aria-label":t})},agendaHeadDescriptionString:function(t){return this.agendaHeadDateString(t)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(t){var e=this._getAttributes(this._eventCommonAttr,t);return e.role="row",this.getAttributeString(e)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":k.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(t){return this.agendaEventAttrString(t)},gridCellAttrString:function(t,e,i){return this.getAttributeString({role:"gridcell","aria-label":[void 0===e.label?e.id:e.label,": ",i]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(t){return this.gridRowAttrString(t)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(t,e){this.setAttributes(t,{id:e+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(t,e){this.setAttributes(t,{"aria-labelledby":e+"",role:"grid"})},minicalRow:function(t){this.setAttributes(t,{role:"row"})},minicalDayCell:function(t,e){var i=e.valueOf()<k._max_date.valueOf()&&e.valueOf()>=k._min_date.valueOf();this.setAttributes(t,{role:"gridcell","aria-label":k.templates.day_date(e),"aria-selected":i?"true":"false"})},minicalHeadCell:function(t){this.setAttributes(t,{role:"columnheader"})},weekAgendaDayCell:function(t){var e=t.querySelector(".dhx_wa_scale_bar"),i=t.querySelector(".dhx_wa_day_data"),n=k.uid()+"";this.setAttributes(e,{id:n}),this.setAttributes(i,{"aria-labelledby":n})},weekAgendaEvent:function(t,e){this.eventAttr(e,t)},lightboxHiddenAttr:function(t){t.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(t){return this.getAttributeString({role:"button","aria-label":t,tabindex:"0"})},yearHeader:function(t,e){this.setAttributes(t,{id:e+""})},yearGrid:function(t,e){this.minicalGrid(t,e)},yearHeadCell:function(t){return this.minicalHeadCell(t)},yearRow:function(t){return this.minicalRow(t)},yearDayCell:function(t){this.setAttributes(t,{role:"gridcell"})},lightboxAttr:function(t){t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(t){return this.getAttributeString({role:"button","aria-label":k.locale.labels[t],tabindex:"0"})},eventMenuAttrString:function(t){return this.getAttributeString({role:"button","aria-label":k.locale.labels[t]})},lightboxHeader:function(t,e){t.setAttribute("aria-label",e)},lightboxSelectAttrString:function(t){var e="";switch(t){case"%Y":e=k.locale.labels.year;break;case"%m":e=k.locale.labels.month;break;case"%d":e=k.locale.labels.day;break;case"%H:%i":e=k.locale.labels.hour+" "+k.locale.labels.minute}return k._waiAria.getAttributeString({"aria-label":e})},messageButtonAttrString:function(t){return"tabindex='0' role='button' aria-label='"+t+"'"},messageInfoAttr:function(t){t.setAttribute("role","alert")},messageModalAttr:function(t,e){t.setAttribute("role","dialog"),e&&t.setAttribute("aria-labelledby",e)},quickInfoAttr:function(t){t.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(t,e){t.setAttribute("aria-label",e)},quickInfoButtonAttrString:function(t){return k._waiAria.getAttributeString({role:"button","aria-label":t,tabindex:"0"})},tooltipAttr:function(t){t.setAttribute("role","tooltip")},tooltipVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(t){t.setAttribute("aria-hidden","true")}},k._waiAria)k._waiAria[t]=function(t){return function(){return e()?" ":t.apply(this,arguments)}}(k._waiAria[t])}(),k.utils={mixin:function(t,e,i){for(var n in e)(void 0===t[n]||i)&&(t[n]=e[n]);return t},copy:function n(t){var e,i;if(t&&"object"==typeof t)switch(!0){case f(t):i=new Date(t);break;case _(t):for(i=new Array(t.length),e=0;e<t.length;e++)i[e]=n(t[e]);break;case h(t):i=new String(t);break;case c(t):i=new Number(t);break;case u(t):i=new Boolean(t);break;default:for(e in i={},t)Object.prototype.hasOwnProperty.apply(t,[e])&&(i[e]=n(t[e]))}return i||t}},k.$domHelpers={getAbsoluteLeft:function(t){return this.getOffset(t).left},getAbsoluteTop:function(t){return this.getOffset(t).top},getOffsetSum:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},getOffsetRect:function(t){var e=t.getBoundingClientRect(),i=0,n=0;if(/Mobi/.test(navigator.userAgent)){var a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.style.width="1px",a.style.height="1px",document.body.appendChild(a);var r=a.getBoundingClientRect();i=e.top-r.top,n=e.left-r.left,a.parentNode.removeChild(a)}else{var s=document.body,o=document.documentElement,d=window.pageYOffset||o.scrollTop||s.scrollTop,l=window.pageXOffset||o.scrollLeft||s.scrollLeft,_=o.clientTop||s.clientTop||0,h=o.clientLeft||s.clientLeft||0;i=e.top+d-_,n=e.left+l-h}return{top:Math.round(i),left:Math.round(n)}},getOffset:function(t){return t.getBoundingClientRect?this.getOffsetRect(t):this.getOffsetSum(t)},closest:function(t,e){return t&&e?b(t,e):null},insertAfter:function(t,e){e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)}},Element.prototype.closest)b=function(t,e){return t.closest(e)};else{var w=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;b=function(t,e){var i=t;do{if(w.call(i,e))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null}}k.$env={isIE:0<=navigator.userAgent.indexOf("MSIE")||0<=navigator.userAgent.indexOf("Trident"),isIE6:!window.XMLHttpRequest&&0<=navigator.userAgent.indexOf("MSIE"),isIE7:0<=navigator.userAgent.indexOf("MSIE 7.0")&&navigator.userAgent.indexOf("Trident")<0,isIE8:0<=navigator.userAgent.indexOf("MSIE 8.0")&&0<=navigator.userAgent.indexOf("Trident"),isOpera:0<=navigator.userAgent.indexOf("Opera"),isChrome:0<=navigator.userAgent.indexOf("Chrome"),isKHTML:0<=navigator.userAgent.indexOf("Safari")||0<=navigator.userAgent.indexOf("Konqueror"),isFF:0<=navigator.userAgent.indexOf("Firefox"),isIPad:0<=navigator.userAgent.search(/iPad/gi),isEdge:-1!=navigator.userAgent.indexOf("Edge")},k.$ajax={_obj:k,cache:!0,method:"get",parse:function(t){return"string"!=typeof t?t:(t=t.replace(/^[\s]+/,""),window.DOMParser&&!k.$env.isIE?e=(new window.DOMParser).parseFromString(t,"text/xml"):window.ActiveXObject!==window.undefined&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)),e);var e},xmltop:function(t,e,i){if(void 0===e.status||e.status<400){var n=e.responseXML?e.responseXML||e:this.parse(e.responseText||e);if(n&&null!==n.documentElement&&!n.getElementsByTagName("parsererror").length)return n.getElementsByTagName(t)[0]}return-1!==i&&this._obj.callEvent("onLoadXMLError",["Incorrect XML",e,i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),k.$env.isIE)return e.selectNodes(t)||[];for(var i,n=[],a=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=a.iterateNext();)n.push(i);return n},query:function(t){this._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){this._call("PUT",t,e,!0,i)},del:function(t,e,i){this._call("DELETE",t,e,!0,i)},post:function(t,e,i){1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null===e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window[e],0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,a,r,s){var o=this._obj,d=window.XMLHttpRequest&&!o.$env.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(n&&(d.onreadystatechange=function(){if(4==d.readyState||l&&3==d.readyState){if((200!=d.status||""===d.responseText)&&!o.callEvent("onAjaxError",[d]))return;window.setTimeout(function(){"function"==typeof a&&a.apply(window,[{xmlDoc:d,filePath:e}]),r&&(void 0!==r.postData?this.postLong(r.url,r.postData,a):this.getLong(r.url,a)),d=a=null},1)}}),"GET"!=t||this.cache||(e+=(0<=e.indexOf("?")?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),d.open(t,e,n),s)for(var _ in s)d.setRequestHeader(_,s[_]);else"POST"==t.toUpperCase()||"PUT"==t||"DELETE"==t?d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);if(d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(i),!n)return{xmlDoc:d,filePath:e}},urlSeparator:function(t){return-1!=t.indexOf("?")?"&":"?"}};var D,E,A,S,M,O=function(t,e){for(var i="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",n=t.match(/%[a-zA-Z]/g),a=0;a<n.length;a++)switch(n[a]){case"%j":case"%d":i+="set[2]=temp["+a+"]||1;";break;case"%n":case"%m":i+="set[1]=(temp["+a+"]||1)-1;";break;case"%y":i+="set[0]=temp["+a+"]*1+(temp["+a+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":i+="set[3]=temp["+a+"]||0;";break;case"%i":i+="set[4]=temp["+a+"]||0;";break;case"%Y":i+="set[0]=temp["+a+"]||0;";break;case"%a":case"%A":i+="set[3]=set[3]%12+((temp["+a+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":i+="set[5]=temp["+a+"]||0;";break;case"%M":i+="set[1]=this.locale.date.month_short_hash[temp["+a+"]]||0;";break;case"%F":i+="set[1]=this.locale.date.month_full_hash[temp["+a+"]]||0;"}var r="set[0],set[1],set[2],set[3],set[4],set[5]";return e&&(r=" Date.UTC("+r+")"),new Function("date","var set=[0,0,1,0,0,0]; "+i+" return new Date("+r+");")};k.date={init:function(){for(var t=k.locale.date.month_short,e=k.locale.date.month_short_hash={},i=0;i<t.length;i++)e[t[i]]=i;for(t=k.locale.date.month_full,e=k.locale.date.month_full_hash={},i=0;i<t.length;i++)e[t[i]]=i},_bind_host_object:function(t){return t.bind?t.bind(k):function(){return t.apply(k,arguments)}},date_part:function(t){var e=new Date(t);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getHours()&&(t.getDate()<e.getDate()||t.getMonth()<e.getMonth()||t.getFullYear()<e.getFullYear())&&t.setTime(t.getTime()+36e5*(24-t.getHours())),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(t){var e=t.getDay();return k.config.start_on_monday&&(0===e?e=6:e--),this.date_part(this.add(t,-1*e,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},_add_days:function(t,e){var i=new Date(t.valueOf());if(i.setDate(i.getDate()+e),e==Math.round(e)&&0<e){var n=(+i-+t)%864e5;if(n&&t.getTimezoneOffset()==i.getTimezoneOffset()){var a=n/36e5;i.setTime(i.getTime()+60*(24-a)*60*1e3)}}return 0<=e&&!t.getHours()&&i.getHours()&&(i.getDate()<t.getDate()||i.getMonth()<t.getMonth()||i.getFullYear()<t.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},add:function(t,e,i){var n=new Date(t.valueOf());switch(i){case"day":n=k.date._add_days(n,e);break;case"week":n=k.date._add_days(n,7*e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setYear(n.getFullYear()+e);break;case"hour":n.setTime(n.getTime()+60*e*60*1e3);break;case"minute":n.setTime(n.getTime()+60*e*1e3);break;default:return k.date["add_"+i](t,e,i)}return n},to_fixed:function(t){return t<10?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(t,e){t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+this.date.to_fixed(date.getDate())+"';case"%m":return'"+this.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+this.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+this.locale.date.day_short[date.getDay()]+"';case"%l":return'"+this.locale.date.day_full[date.getDay()]+"';case"%M":return'"+this.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+this.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+this.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+this.date.to_fixed(date.getHours())+"';case"%i":return'"+this.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+this.date.to_fixed(date.getSeconds())+"';case"%W":return'"+this.date.to_fixed(this.date.getISOWeek(date))+"';default:return t}}),e&&(t=t.replace(/date\.get/g,"date.getUTC"));var i=new Function("date",'return "'+t+'";');return k.date._bind_host_object(i)},str_to_date:function(t,e,i){var n=O(t,e),a=/^[0-9]{4}(\-|\/)[0-9]{2}(\-|\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,r=/^[0-9]{2}\/[0-9]{2}\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,s=/^[0-9]{2}\-[0-9]{2}\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,d=function(t){return a.test(String(t))},l=function(t){return r.test(String(t))},_=function(t){return s.test(String(t))},h=function(t){return o.test(t)},c=O("%Y-%m-%d %H:%i:%s",e),u=O("%m/%d/%Y %H:%i:%s",e),f=O("%d-%m-%Y %H:%i:%s",e);return function(t){if(!i&&!k.config.parse_exact_format){if(t&&t.getISOWeek)return new Date(t);if("number"==typeof t)return new Date(t);if(d(t))return c(t);if(l(t))return u(t);if(_(t))return f(t);if(h(t))return new Date(t)}return n.call(k,t)}},getISOWeek:function(t){if(!t)return!1;var e=(t=this.date_part(new Date(t))).getDay();0===e&&(e=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-e));var n=i.getFullYear(),a=Math.round((i.getTime()-new Date(n,0,1).getTime())/864e5);return 1+Math.floor(a/7)},getUTCISOWeek:function(t){return this.getISOWeek(this.convert_to_utc(t))},convert_to_utc:function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}},k.locale={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daily",repeat_radio_week:"Weekly",repeat_radio_month:"Monthly",repeat_radio_year:"Yearly",repeat_radio_day_type:"Every",repeat_text_day_count:"day",repeat_radio_day_type2:"Every workday",repeat_week:" Repeat every",repeat_text_week_count:"week next days:",repeat_radio_month_type:"Repeat",repeat_radio_month_start:"On",repeat_text_month_day:"day every",repeat_text_month_count:"month",repeat_text_month_count2_before:"every",repeat_text_month_count2_after:"month",repeat_year_label:"On",select_year_day2:"of",repeat_text_year_day:"day",select_year_month:"month",repeat_radio_end:"No end date",repeat_text_occurences_count:"occurrences",repeat_radio_end2:"After",repeat_radio_end3:"End by",month_for_recurring:["January","February","March","April","May","June","July","August","September","October","November","December"],day_for_recurring:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},k.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D, %F %j",hour_date:"%H:%i",month_day:"%d",date_format:"%Y-%m-%d %H:%i",api_date:"%d-%m-%Y %H:%i",parse_exact_format:!1,preserve_length:!0,time_step:5,start_on_monday:!0,first_hour:0,last_hour:24,readonly:!1,drag_resize:!0,drag_move:!0,drag_create:!0,drag_event_body:!0,dblclick_create:!0,edit_on_create:!0,details_on_create:!1,header:null,resize_month_events:!1,resize_month_timed:!1,responsive_lightbox:!1,rtl:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:0,drag_lightbox:!0,preserve_scroll:!0,select:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,touch_swipe_dates:!1,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0},k.config.buttons_left.$inital=k.config.buttons_left.join(),k.config.buttons_right.$inital=k.config.buttons_right.join(),k._helpers={parseDate:function(t){return(k.templates.xml_date||k.templates.parse_date)(t)},formatDate:function(t){return(k.templates.xml_format||k.templates.format_date)(t)}},k.templates={},k.init_templates=function(){var t=k.locale.labels;t.dhx_save_btn=t.icon_save,t.dhx_cancel_btn=t.icon_cancel,t.dhx_delete_btn=t.icon_delete;var e=k.date.date_to_str,i=k.config;(function(t,e){for(var i in e)t[i]||(t[i]=e[i])})(k.templates,{day_date:e(i.default_date),month_date:e(i.month_date),week_date:function(t,e){return i.rtl?k.templates.day_date(k.date.add(e,-1,"day"))+" &ndash; "+k.templates.day_date(t):k.templates.day_date(t)+" &ndash; "+k.templates.day_date(k.date.add(e,-1,"day"))},day_scale_date:e(i.default_date),month_scale_date:e(i.week_date),week_scale_date:e(i.day_date),hour_scale:e(i.hour_date),time_picker:e(i.hour_date),event_date:e(i.hour_date),month_day:e(i.month_day),load_format:e(i.load_date),format_date:e(i.date_format,i.server_utc),parse_date:k.date.str_to_date(i.date_format,i.server_utc),api_date:k.date.str_to_date(i.api_date,!1,!1),event_header:function(t,e){return k.templates.event_date(t)+" - "+k.templates.event_date(e)},event_text:function(t,e,i){return i.text},event_class:function(){return""},month_date_class:function(){return""},week_date_class:function(){return""},event_bar_date:function(t){return k.templates.event_date(t)+" "},event_bar_text:function(t,e,i){return i.text},month_events_link:function(t,e){return"<a>View more("+e+" events)</a>"},drag_marker_class:function(){return""},drag_marker_content:function(){return""},tooltip_date_format:k.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(t,e,i){return"<b>Event:</b> "+i.text+"<br/><b>Start date:</b> "+k.templates.tooltip_date_format(t)+"<br/><b>End date:</b> "+k.templates.tooltip_date_format(e)}}),this.callEvent("onTemplatesReady",[])},k.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++},k._events={},k.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._new_event=null,this.clear_view(),this.callEvent("onClearAll",[])},k.addEvent=function(t,e,i,n,a){if(!arguments.length)return this.addEventNow();var r=t;1!=arguments.length&&((r=a||{}).start_date=t,r.end_date=e,r.text=i,r.id=n),r.id=r.id||k.uid(),r.text=r.text||"","string"==typeof r.start_date&&(r.start_date=this.templates.api_date(r.start_date)),"string"==typeof r.end_date&&(r.end_date=this.templates.api_date(r.end_date));var s=6e4*(this.config.event_duration||this.config.time_step);r.start_date.valueOf()==r.end_date.valueOf()&&r.end_date.setTime(r.end_date.valueOf()+s),r._timed=this.isOneDayEvent(r);var o=!this._events[r.id];return this._events[r.id]=r,this.event_updated(r),this._loading||this.callEvent(o?"onEventAdded":"onEventChanged",[r.id,r]),r.id},k.deleteEvent=function(t,e){var i=this._events[t];(e||this.callEvent("onBeforeEventDelete",[t,i])&&this.callEvent("onConfirmedBeforeEventDelete",[t,i]))&&(i&&(this._select_id=null,delete this._events[t],this.event_updated(i),this._drag_id==i.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[t,i]))},k.getEvent=function(t){return this._events[t]},k.setEvent=function(t,e){e.id||(e.id=t),this._events[t]=e},k.for_rendered=function(t,e){for(var i=this._rendered.length-1;0<=i;i--)this._rendered[i].getAttribute("event_id")==t&&e(this._rendered[i],i)},k.changeEventId=function(t,e){if(t!=e){var i=this._events[t];i&&(i.id=e,this._events[e]=i,delete this._events[t]),this.for_rendered(t,function(t){t.setAttribute("event_id",e)}),this._select_id==t&&(
this._select_id=e),this._edit_id==t&&(this._edit_id=e),this.callEvent("onEventIdChange",[t,e])}},function(){for(var t=["text","Text","start_date","StartDate","end_date","EndDate"],e=function(e){return function(t){return k.getEvent(t)[e]}},i=function(n){return function(t,e){var i=k.getEvent(t);i[n]=e,i._changed=!0,i._timed=this.isOneDayEvent(i),k.event_updated(i,!0)}},n=0;n<t.length;n+=2)k["getEvent"+t[n+1]]=e(t[n]),k["setEvent"+t[n+1]]=i(t[n])}(),k.event_updated=function(t){this.is_visible_events(t)?this.render_view_data():this.clear_event(t.id)},k.is_visible_events=function(t){if(t.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<t.end_date.valueOf()){var e=t.start_date.getHours(),i=t.end_date.getHours()+t.end_date.getMinutes()/60,n=this.config.last_hour,a=this.config.first_hour;return!(!this._table_view&&(n<i||i<a)&&(n<=e||e<a)&&!((t.end_date.valueOf()-t.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||e<n&&a<=i))}return!1},k.isOneDayEvent=function(t){var e=new Date(t.end_date.valueOf()-1);return t.start_date.getFullYear()===e.getFullYear()&&t.start_date.getMonth()===e.getMonth()&&t.start_date.getDate()===e.getDate()&&t.end_date.valueOf()-t.start_date.valueOf()<864e5},k.get_visible_events=function(t){var e=[];for(var i in this._events)this.is_visible_events(this._events[i])&&(t&&!this._events[i]._timed||this.filter_event(i,this._events[i])&&e.push(this._events[i]));return e},k.filter_event=function(t,e){var i=this["filter_"+this._mode];return!i||i(t,e)},k._is_main_area_event=function(t){return!!t._timed},k.render_view_data=function(t,e){var i=!1;if(!t){if(i=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),t=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var n=0,a=t.length;n<a;n++)this._recalculate_timed(t[n]);if(this.config.multi_day&&!this._table_view){var r=[],s=[];for(n=0;n<t.length;n++)this._is_main_area_event(t[n])?r.push(t[n]):s.push(t[n]);if(!this._els.dhx_multi_day){var o=k._commonErrorMessages.unknownView(this._mode);throw new Error(o)}this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(s,e),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(r,e)}else{var d=document.createDocumentFragment(),l=this._els.dhx_cal_data[0];this._rendered_location=d,this.render_data(t,e),l.appendChild(d),this._rendered_location=l}i&&this.callEvent("onDataRender",[])},k._view_month_day=function(t){var e=k.getActionData(t).date;k.callEvent("onViewMoreClick",[e])&&k.setCurrentView(e,"day")},k._render_month_link=function(t){for(var e=this._rendered_location,i=this._lame_clone(t),n=t._sday;n<t._eday;n++){i._sday=n,i._eday=n+1;var a=k.date,r=k._min_date;r=a.add(r,i._sweek,"week"),r=a.add(r,i._sday,"day");var s=k.getEvents(r,a.add(r,1,"day")).length,o=this._get_event_bar_pos(i),d=o.x2-o.x,l=document.createElement("div");l.onclick=function(t){k._view_month_day(t||event)},l.className="dhx_month_link",l.style.top=o.y+"px",l.style.left=o.x+"px",l.style.width=d+"px",l.innerHTML=k.templates.month_events_link(r,s),this._rendered.push(l),e.appendChild(l)}},k._recalculate_timed=function(t){var e;t&&((e="object"!=typeof t?this._events[t]:t)&&(e._timed=k.isOneDayEvent(e)))},k.attachEvent("onEventChanged",k._recalculate_timed),k.attachEvent("onEventAdded",k._recalculate_timed),k.render_data=function(t,e){t=this._pre_render_events(t,e);for(var i={},n=0;n<t.length;n++)if(this._table_view)if("month"!=k._mode)this.render_event_bar(t[n]);else{var a=k.config.max_month_events;a!==1*a||t[n]._sorder<a?this.render_event_bar(t[n]):void 0!==a&&t[n]._sorder==a&&k._render_month_link(t[n])}else{var r=t[n],s=k.locate_holder(r._sday);if(!s)continue;i[r._sday]||(i[r._sday]={real:s,buffer:document.createDocumentFragment(),width:s.clientWidth});var o=i[r._sday];this.render_event(r,o.buffer,o.width)}for(var n in i){(o=i[n]).real&&o.buffer&&o.real.appendChild(o.buffer)}},k._get_first_visible_cell=function(t){for(var e=0;e<t.length;e++)if(-1==(t[e].className||"").indexOf("dhx_scale_ignore"))return t[e];return t[0]},k._pre_render_events=function(t,e){var i=this.xy.bar_height,n=this._colsS.heights,a=this._colsS.heights=[0,0,0,0,0,0,0],r=this._els.dhx_cal_data[0];if(t=this._table_view?this._pre_render_events_table(t,e):this._pre_render_events_line(t,e),this._table_view)if(e)this._colsS.heights=n;else{var s=r.firstChild;if(s.rows){for(var o=0;o<s.rows.length;o++){a[o]++;var d=s.rows[o].cells,l=this._colsS.height-this.xy.month_head_height;if(a[o]*i>l){var _=l;1*this.config.max_month_events!==this.config.max_month_events||a[o]<=this.config.max_month_events?_=a[o]*i:(this.config.max_month_events+1)*i>l&&(_=(this.config.max_month_events+1)*i);for(var h=0;h<d.length;h++)d[h].childNodes[1].style.height=_+"px"}a[o]=(a[o-1]||0)+k._get_first_visible_cell(d).offsetHeight}if(a.unshift(0),s.parentNode.offsetHeight<s.parentNode.scrollHeight&&!k._colsS.scroll_fix&&k.xy.scroll_width){var c=k._colsS,u=c[c.col_length],f=c.heights.slice();u-=k.xy.scroll_width||0,this._calc_scale_sizes(u,this._min_date,this._max_date),k._colsS.heights=f,this.set_xy(this._els.dhx_cal_header[0],u,this.xy.scale_height),k._render_scales(this._els.dhx_cal_header[0]),k._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),c.scroll_fix=!0}}else if(t.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(a[0]=-1),t.length||-1==a[0]){var g=(s.parentNode.childNodes,(a[0]+1)*i+1),v=g,m=g+"px";this.config.multi_day_height_limit&&(m=(v=Math.min(g,this.config.multi_day_height_limit))+"px"),r.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+v+"px",r.style.height=this._obj.offsetHeight-parseInt(r.style.top,10)-(this.xy.margin_top||0)+"px";var p=this._els.dhx_multi_day[0];p.style.height=m,p.style.visibility=-1==a[0]?"hidden":"visible";var x=this._els.dhx_multi_day[1];x.style.height=m,x.style.visibility=-1==a[0]?"hidden":"visible",x.className=a[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(a[0]+1)*i,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),a[0]=0,v!=g&&(r.style.top=parseInt(r.style.top)+2+"px",p.style.overflowY="auto",x.style.position="fixed",x.style.top="",x.style.left="")}}return t},k._get_event_sday=function(t){var e=this.date.day_start(new Date(t.start_date));return Math.round((e.valueOf()-this._min_date.valueOf())/864e5)},k._get_event_mapped_end_date=function(t){var e=t.end_date;if(this.config.separate_short_events){var i=(t.end_date-t.start_date)/6e4;i<this._min_mapped_duration&&(e=this.date.add(e,this._min_mapped_duration-i,"minute"))}return e},k._pre_render_events_line=function(t,e){t.sort(function(t,e){return t.start_date.valueOf()==e.start_date.valueOf()?t.id>e.id?1:-1:t.start_date>e.start_date?1:-1});var i=[],n=[];this._min_mapped_duration=Math.ceil(60*this.xy.min_event_height/this.config.hour_size_px);for(var a=0;a<t.length;a++){var r=t[a],s=r.start_date,o=r.end_date,d=s.getHours(),l=o.getHours();if(r._sday=this._get_event_sday(r),this._ignores[r._sday])t.splice(a,1),a--;else{if(i[r._sday]||(i[r._sday]=[]),!e){r._inner=!1;for(var _=i[r._sday];_.length;){var h=_[_.length-1];if(!(this._get_event_mapped_end_date(h).valueOf()<=r.start_date.valueOf()))break;_.splice(_.length-1,1)}for(var c=_.length,u=!1,f=0;f<_.length;f++){h=_[f];if(this._get_event_mapped_end_date(h).valueOf()<=r.start_date.valueOf()){u=!0,r._sorder=h._sorder,c=f,r._inner=!0;break}}if(_.length&&(_[_.length-1]._inner=!0),!u)if(_.length)if(_.length<=_[_.length-1]._sorder){if(_[_.length-1]._sorder)for(f=0;f<_.length;f++){for(var g=!1,v=0;v<_.length;v++)if(_[v]._sorder==f){g=!0;break}if(!g){r._sorder=f;break}}else r._sorder=0;r._inner=!0}else{var m=_[0]._sorder;for(f=1;f<_.length;f++)_[f]._sorder>m&&(m=_[f]._sorder);r._sorder=m+1,r._inner=!1}else r._sorder=0;_.splice(c,c==_.length?0:1,r),_.length>(_.max_count||0)?(_.max_count=_.length,r._count=_.length):r._count=r._count?r._count:1}(d<this.config.first_hour||l>=this.config.last_hour)&&(n.push(r),t[a]=r=this._copy_event(r),d<this.config.first_hour&&(r.start_date.setHours(this.config.first_hour),r.start_date.setMinutes(0)),l>=this.config.last_hour&&(r.end_date.setMinutes(0),r.end_date.setHours(this.config.last_hour)),r.start_date>r.end_date||d==this.config.last_hour)&&(t.splice(a,1),a--)}}if(!e){for(a=0;a<t.length;a++)t[a]._count=i[t[a]._sday].max_count;for(a=0;a<n.length;a++)n[a]._count=i[n[a]._sday].max_count}return t},k._time_order=function(t){t.sort(function(t,e){return t.start_date.valueOf()==e.start_date.valueOf()?t._timed&&!e._timed?1:!t._timed&&e._timed?-1:t.id>e.id?1:-1:t.start_date>e.start_date?1:-1})},k._is_any_multiday_cell_visible=function(t,e,i){var n=this._cols.length,a=!1,r=t,s=!0,o=new Date(e);for(k.date.day_start(new Date(e)).valueOf()!=e.valueOf()&&(o=k.date.day_start(o),o=k.date.add(o,1,"day"));r<o;){s=!1;var d=this.locate_holder_day(r,!1,i)%n;if(!this._ignores[d]){a=!0;break}r=k.date.add(r,1,"day")}return s||a},k._pre_render_events_table=function(t,e){this._time_order(t);for(var i,n=[],a=[[],[],[],[],[],[],[]],r=this._colsS.heights,s=this._cols.length,o={},d=0;d<t.length;d++){var l=t[d],_=l.id;o[_]||(o[_]={first_chunk:!0,last_chunk:!0});var h=o[_],c=i||l.start_date,u=l.end_date;c<this._min_date&&(h.first_chunk=!1,c=this._min_date),u>this._max_date&&(h.last_chunk=!1,u=this._max_date);var f=this.locate_holder_day(c,!1,l);if(l._sday=f%s,!this._ignores[l._sday]||!l._timed){var g=this.locate_holder_day(u,!0,l)||s;if(l._eday=g%s||s,l._length=g-f,l._sweek=Math.floor((this._correct_shift(c.valueOf(),1)-this._min_date.valueOf())/(864e5*s)),k._is_any_multiday_cell_visible(c,u,l)){var v,m=a[l._sweek];for(v=0;v<m.length&&!(m[v]._eday<=l._sday);v++);if(l._sorder&&e||(l._sorder=v),l._sday+l._length<=s)i=null,n.push(l),r[(m[v]=l)._sweek]=m.length-1,l._first_chunk=h.first_chunk,l._last_chunk=h.last_chunk;else{var p=this._copy_event(l);p.id=l.id,p._length=s-l._sday,p._eday=s,p._sday=l._sday,p._sweek=l._sweek,p._sorder=l._sorder,p.end_date=this.date.add(c,p._length,"day"),p._first_chunk=h.first_chunk,h.first_chunk&&(h.first_chunk=!1),n.push(p),i=(m[v]=p).end_date,r[l._sweek]=m.length-1,d--}}}}return n},k._copy_dummy=function(){var t=new Date(this.start_date),e=new Date(this.end_date);this.start_date=t,this.end_date=e},k._copy_event=function(t){return this._copy_dummy.prototype=t,new this._copy_dummy},k._rendered=[],k.clear_view=function(){for(var t=0;t<this._rendered.length;t++){var e=this._rendered[t];e.parentNode&&e.parentNode.removeChild(e)}this._rendered=[]},k.updateEvent=function(t){var e=this.getEvent(t);this.clear_event(t),e&&this.is_visible_events(e)&&this.filter_event(t,e)&&(this._table_view||this.config.multi_day||e._timed)&&(this.config.update_render?this.render_view_data():"month"!=this.getState().mode||this.getState().drag_id||this.isOneDayEvent(e)?this.render_view_data([e],!0):this.render_view_data())},k.clear_event=function(t){this.for_rendered(t,function(t,e){t.parentNode&&t.parentNode.removeChild(t),k._rendered.splice(e,1)})},k._y_from_date=function(t){var e=60*t.getHours()+t.getMinutes();return Math.round((60*e*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},k._calc_event_y=function(t,e){e=e||0;var i=60*t.start_date.getHours()+t.start_date.getMinutes(),n=60*t.end_date.getHours()+t.end_date.getMinutes()||60*k.config.last_hour;return{top:this._y_from_date(t.start_date),height:Math.max(e,(n-i)*this.config.hour_size_px/60)}},k.render_event=function(t,e,i){var n=k.xy.menu_width,a=this.config.use_select_menu_space?0:n;if(!(t._sday<0)){var r=k.locate_holder(t._sday);if(r){e=e||r;var s=this._calc_event_y(t,k.xy.min_event_height),o=s.top,d=s.height,l=t._count||1,_=t._sorder||0;i=i||r.clientWidth;var h=Math.floor((i-a)/l),c=_*h+1;if(t._inner||(h*=l-_),this.config.cascade_event_display){var u=this.config.cascade_event_count,f=this.config.cascade_event_margin;c=_%u*f;var g=t._inner?(l-_-1)%u*f/2:0;h=Math.floor(i-a-c-g)}var v=this._render_v_bar(t,a+c,o,h,d,t._text_style,k.templates.event_header(t.start_date,t.end_date,t),k.templates.event_text(t.start_date,t.end_date,t));if(this._waiAria.eventAttr(t,v),this._rendered.push(v),e.appendChild(v),c=c+parseInt(this.config.rtl?r.style.right:r.style.left,10)+a,this._edit_id==t.id){v.style.zIndex=1,h=Math.max(h-4,k.xy.editor_width),(v=document.createElement("div")).setAttribute("event_id",t.id),this._waiAria.eventAttr(t,v),v.className="dhx_cal_event dhx_cal_editor",this.config.rtl&&c++,this.set_xy(v,h,d-20,c,o+(k.xy.event_header_height||14)),t.color&&(v.style.backgroundColor=t.color);var m=k.templates.event_class(t.start_date,t.end_date,t);m&&(v.className+=" "+m);var p=document.createElement("div");this.set_xy(p,h-6,d-26),p.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",v.appendChild(p),this._els.dhx_cal_data[0].appendChild(v),this._rendered.push(v),p.innerHTML="<textarea class='dhx_cal_editor'>"+t.text+"</textarea>",this._editor=p.querySelector("textarea"),this._quirks7&&(this._editor.style.height=d-12+"px"),this._editor.onkeydown=function(t){if((t||event).shiftKey)return!0;var e=(t||event).keyCode;e==k.keys.edit_save&&k.editStop(!0),e==k.keys.edit_cancel&&k.editStop(!1),e!=k.keys.edit_save&&e!=k.keys.edit_cancel||t.preventDefault&&t.preventDefault()},this._editor.onselectstart=function(t){return(t||event).cancelBubble=!0},k._focus(this._editor,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(0!==this.xy.menu_width&&this._select_id==t.id){this.config.cascade_event_display&&this._drag_mode&&(v.style.zIndex=1);for(var x,b=this.config["icons_"+(this._edit_id==t.id?"edit":"select")],y="",w=t.color?"background-color: "+t.color+";":"",D=t.textColor?"color: "+t.textColor+";":"",E=0;E<b.length;E++)x=this._waiAria.eventMenuAttrString(b[E]),y+="<div class='dhx_menu_icon "+b[E]+"' style='"+w+D+"' title='"+this.locale.labels[b[E]]+"'"+x+"></div>";var A=this._render_v_bar(t,c-n+1,o,n,20*b.length+26-2,"","<div style='"+w+D+"' class='dhx_menu_head'></div>",y,!0);A.style.left=c-n+1,this._els.dhx_cal_data[0].appendChild(A),this._rendered.push(A)}this.config.drag_highlight&&this._drag_id==t.id&&this.highlightEventPosition(t)}}},k._render_v_bar=function(t,e,i,n,a,r,s,o,d){var l=document.createElement("div"),_=t.id,h=d?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",c=k.getState();c.drag_id==t.id&&(h+=" dhx_cal_event_drag"),c.select_id==t.id&&(h+=" dhx_cal_event_selected");var u=k.templates.event_class(t.start_date,t.end_date,t);u&&(h=h+" "+u),this.config.cascade_event_display&&(h+=" dhx_cal_event_cascade");var f=t.color?"background-color:"+t.color+";":"",g=t.textColor?"color:"+t.textColor+";":"",v=k._border_box_events(),m=n-2,p=v?m:n-4,x=v?m:n-6,b=v?m:n-(this._quirks?4:14),y=v?m-2:n-8,w=v?a-this.xy.event_header_height-1:a-(this._quirks?20:30)+1,D='<div event_id="'+_+'" class="'+h+'" style="position:absolute; top:'+i+"px; "+(this.config.rtl?"right:":"left:")+e+"px; width:"+p+"px; height:"+a+"px;"+(r||"")+'"></div>';l.innerHTML=D;var E=l.cloneNode(!0).firstChild;if(!d&&k.renderEvent(E,t,n,a,s,o))return E;E=l.firstChild;var A='<div class="dhx_event_move dhx_header" style=" width:'+x+"px;"+f+'" >&nbsp;</div>';A+='<div class="dhx_event_move dhx_title" style="'+f+g+'">'+s+"</div>",A+='<div class="dhx_body" style=" width:'+b+"px; height:"+w+"px;"+f+g+'">'+o+"</div>";var S="dhx_event_resize dhx_footer";return(d||!1===t._drag_resize)&&(S="dhx_resize_denied "+S),A+='<div class="'+S+'" style=" width:'+y+"px;"+(d?" margin-top:-1px;":"")+f+g+'" ></div>',E.innerHTML=A,E},k.renderEvent=function(){return!1},k.locate_holder=function(t){return"day"==this._mode?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[t]},k.locate_holder_day=function(t,e){var i=Math.floor((this._correct_shift(t,1)-this._min_date)/864e5);return e&&this.date.time_part(t)&&i++,i},k._get_dnd_order=function(t,e,i){if(!this._drag_event)return t;this._drag_event._orig_sorder?t=this._drag_event._orig_sorder:this._drag_event._orig_sorder=t;for(var n=e*t;i<n+e;)t--,n-=e;return Math.max(t,0)},k._get_event_bar_pos=function(t){var e=this.config.rtl,i=this._colsS,n=i[t._sday],a=i[t._eday];e&&(n=i[i.col_length]-i[t._eday]+i[0],a=i[i.col_length]-i[t._sday]+i[0]),a==n&&(a=i[t._eday+1]);var r=this.xy.bar_height,s=t._sorder;if(t.id==this._drag_id){var o=i.heights[t._sweek+1]-i.heights[t._sweek]-this.xy.month_head_height;s=k._get_dnd_order(s,r,o)}var d=s*r;return{x:n,x2:a,y:i.heights[t._sweek]+(i.height?this.xy.month_scale_height+2:2)+d}},k.render_event_bar=function(t){var e=this._rendered_location,i=this._get_event_bar_pos(t),n=i.y,a=i.x,r=i.x2,s="";if(r){var o=k.config.resize_month_events&&"month"==this._mode&&(!t._timed||k.config.resize_month_timed),d=document.createElement("div"),l=t.hasOwnProperty("_first_chunk")&&t._first_chunk,_=t.hasOwnProperty("_last_chunk")&&t._last_chunk,h=o&&(t._timed||l),c=o&&(t._timed||_),u=!0,f="dhx_cal_event_clear";t._timed&&!o||(u=!1,f="dhx_cal_event_line"),l&&(f+=" dhx_cal_event_line_start"),_&&(f+=" dhx_cal_event_line_end"),h&&(s+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),c&&(s+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var g=k.templates.event_class(t.start_date,t.end_date,t);g&&(f+=" "+g);var v=t.color?"background:"+t.color+";":"",m=["position:absolute","top:"+n+"px","left:"+a+"px","width:"+(r-a-3-(u?1:0))+"px",t.textColor?"color:"+t.textColor+";":"",v,t._text_style||""].join(";"),p="<div event_id='"+t.id+"' class='"+f+"' style='"+m+"'"+this._waiAria.eventBarAttrString(t)+">";o&&(p+=s),"month"==k.getState().mode&&(t=k.getEvent(t.id)),t._timed&&(p+=k.templates.event_bar_date(t.start_date,t.end_date,t)),p+=k.templates.event_bar_text(t.start_date,t.end_date,t)+"</div>",p+="</div>",d.innerHTML=p,this._rendered.push(d.firstChild),e.appendChild(d.firstChild)}},k._locate_event=function(t){for(var e=null;t&&!e&&t.getAttribute;)e=t.getAttribute("event_id"),t=t.parentNode;return e},k._locate_css=function(t,e,i){void 0===i&&(i=!0);for(var n=t.target||t.srcElement,a="";n;){if(a=k._getClassName(n)){var r=a.indexOf(e);if(0<=r){if(!i)return n;var s=0===r||!k._trim(a.charAt(r-1)),o=r+e.length>=a.length||!k._trim(a.charAt(r+e.length));if(s&&o)return n}}n=n.parentNode}return null},k.edit=function(t){this._edit_id!=t&&(this.editStop(!1,t),this._edit_id=t,this.updateEvent(t))},k.editStop=function(t,e){if(!e||this._edit_id!=e){var i=this.getEvent(this._edit_id);i&&(t&&(i.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(i.id),this._edit_stop_event(i,t))}},k._edit_stop_event=function(t,e){this._new_event?(e?this.callEvent("onEventAdded",[t.id,t]):t&&this.deleteEvent(t.id,!0),this._new_event=null):e&&this.callEvent("onEventChanged",[t.id,t])},k.getEvents=function(t,e){var i=[];for(var n in this._events){var a=this._events[n];a&&(!t&&!e||a.start_date<e&&a.end_date>t)&&i.push(a)}return i},k.getRenderedEvent=function(t){if(t){for(var e=k._rendered,i=0;i<e.length;i++){var n=e[i];if(n.getAttribute("event_id")==t)return n}return null}},k.showEvent=function(t,e){var i="number"==typeof t||"string"==typeof t?k.getEvent(t):t;if(e=e||k._mode,i&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[i,e]))){var n=k.config.scroll_hour;k.config.scroll_hour=i.start_date.getHours();var a=k.config.preserve_scroll;k.config.preserve_scroll=!1;var r=i.color,s=i.textColor;if(k.config.highlight_displayed_event&&(i.color=k.config.displayed_event_color,i.textColor=k.config.displayed_event_text_color),k.setCurrentView(new Date(i.start_date),e),i.color=r,i.textColor=s,k.config.scroll_hour=n,k.config.preserve_scroll=a,k.matrix&&k.matrix[e]){var o=k.getView(),d=o.y_property,l=k.getEvent(i.id);if(l){var _=o.posFromSection(l[d]),h=o.posFromDate(l.start_date),c=k.$container.querySelector(".dhx_timeline_data_wrapper");h-=(c.offsetWidth-o.dx)/2,_=_-c.offsetHeight/2+o.dy/2,o.scrollTo({left:h,top:_})}}k.callEvent("onAfterEventDisplay",[i,e])}},k._append_drag_marker=function(t){if(!t.parentNode){var e=k._els.dhx_cal_data[0].lastChild,i=k._getClassName(e);i.indexOf("dhx_scale_holder")<0&&e.previousSibling&&(e=e.previousSibling),i=k._getClassName(e),e&&0===i.indexOf("dhx_scale_holder")&&e.appendChild(t)}},k._update_marker_position=function(t,e){var i=k._calc_event_y(e,0);t.style.top=i.top+"px",t.style.height=i.height+"px"},k.highlightEventPosition=function(t){var e=document.createElement("div");e.setAttribute("event_id",t.id),this._rendered.push(e),this._update_marker_position(e,t);var i=this.templates.drag_marker_class(t.start_date,t.end_date,t),n=this.templates.drag_marker_content(t.start_date,t.end_date,t);e.className="dhx_drag_marker",i&&(e.className+=" "+i),n&&(e.innerHTML=n),this._append_drag_marker(e)},k._loaded={},k._load=function(t,e){function i(t){k.on_load(t),k.callEvent("onLoadEnd",[])}if(t=t||this._load_url){var n;if(t+=(-1==t.indexOf("?")?"?":"&")+"timeshift="+(new Date).getTimezoneOffset(),this.config.prevent_cache&&(t+="&uid="+this.uid()),e=e||this._date,this._load_mode){var a=this.templates.load_format;for(e=this.date[this._load_mode+"_start"](new Date(e.valueOf()));e>this._min_date;)e=this.date.add(e,-1,this._load_mode);n=e;for(var r=!0;n<this._max_date;)n=this.date.add(n,1,this._load_mode),this._loaded[a(e)]&&r?e=this.date.add(e,1,this._load_mode):r=!1;for(var s=n;n=s,e<(s=this.date.add(n,-1,this._load_mode))&&this._loaded[a(s)];);if(n<=e)return!1;for(k.$ajax.get(t+"&from="+a(e)+"&to="+a(n),i);e<n;)this._loaded[a(e)]=!0,e=this.date.add(e,1,this._load_mode)}else k.$ajax.get(t,i);return this.callEvent("onXLS",[]),this.callEvent("onLoadStart",[]),!0}},k._parsers={},k._parsers.xml={canParse:function(t,e){if(e.responseXML&&e.responseXML.firstChild)return!0;try{var i=k.$ajax.parse(e.responseText),n=k.$ajax.xmltop("data",i);if(n&&"data"===n.tagName)return!0}catch(t){}return!1},parse:function(t){var e;if(t.xmlDoc.responseXML||(t.xmlDoc.responseXML=k.$ajax.parse(t.xmlDoc.responseText)),"data"!=(e=k.$ajax.xmltop("data",t.xmlDoc)).tagName)return null;var i=e.getAttribute("dhx_security");i&&(window.dhtmlx&&(dhtmlx.security_key=i),k.security_key=i);for(var n=k.$ajax.xpath("//coll_options",t.xmlDoc),a=0;a<n.length;a++){var r=n[a].getAttribute("for"),s=k.serverList[r];s||(k.serverList[r]=s=[]),s.splice(0,s.length);for(var o=k.$ajax.xpath(".//item",n[a]),d=0;d<o.length;d++){for(var l=o[d].attributes,_={key:o[d].getAttribute("value"),label:o[d].getAttribute("label")},h=0;h<l.length;h++){var c=l[h];"value"!=c.nodeName&&"label"!=c.nodeName&&(_[c.nodeName]=c.nodeValue)}s.push(_)}}n.length&&k.callEvent("onOptionsLoad",[]);var u=k.$ajax.xpath("//userdata",t.xmlDoc);for(a=0;a<u.length;a++){var f=k._xmlNodeToJSON(u[a]);k._userdata[f.name]=f.text}var g=[];e=k.$ajax.xpath("//event",t.xmlDoc);for(a=0;a<e.length;a++){var v=g[a]=k._xmlNodeToJSON(e[a]);k._init_event(v)}return g}},k.json=k._parsers.json={canParse:function(t){if(t&&"object"==typeof t)return!0;if("string"==typeof t)try{var e=JSON.parse(t);return"[object Object]"===Object.prototype.toString.call(e)||"[object Array]"===Object.prototype.toString.call(e)}catch(t){return!1}return!1},parse:function(t){var e=[];"string"==typeof t&&(t=JSON.parse(t)),e=(e="[object Array]"===Object.prototype.toString.call(t)?t:t?t.data:[])||[],t.dhx_security&&(window.dhtmlx&&(dhtmlx.security_key=t.dhx_security),k.security_key=t.dhx_security);var i=t&&t.collections?t.collections:{},n=!1;for(var a in i)if(i.hasOwnProperty(a)){n=!0;var r=i[a],s=k.serverList[a];s||(k.serverList[a]=s=[]),s.splice(0,s.length);for(var o=0;o<r.length;o++){var d=r[o],l={key:d.value,label:d.label};for(var _ in d)if(d.hasOwnProperty(_)){if("value"==_||"label"==_)continue;l[_]=d[_]}s.push(l)}}n&&k.callEvent("onOptionsLoad",[]);for(var h=[],c=0;c<e.length;c++){var u=e[c];k._init_event(u),h.push(u)}return h}},k.ical=k._parsers.ical={canParse:function(t){return"string"==typeof t&&new RegExp("^BEGIN:VCALENDAR").test(t)},parse:function(t){var e=t.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(e.length){e[0]=e[0].replace(/[\r\n]+ /g,""),e[0]=e[0].replace(/[\r\n]+(?=[a-z \t])/g," "),e[0]=e[0].replace(/\;[^:\r\n]*:/g,":");for(var i,n=[],a=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");null!==(i=a.exec(e));){for(var r,s={},o=/[^\r\n]+[\r\n]+/g;null!==(r=o.exec(i[1]));)this.parse_param(r.toString(),s);s.uid&&!s.id&&(s.id=s.uid),n.push(s)}return n}},parse_param:function(t,e){var i=t.indexOf(":");if(-1!=i){var n=t.substr(0,i).toLowerCase(),a=t.substr(i+1).replace(/\\\,/g,",").replace(/[\r\n]+$/,"");"summary"==n?n="text":"dtstart"==n?(n="start_date",a=this.parse_date(a,0,0)):"dtend"==n&&(n="end_date",a=this.parse_date(a,0,0)),e[n]=a}},parse_date:function(t,e,i){var n=t.split("T"),a=!1;n[1]&&(e=n[1].substr(0,2),i=n[1].substr(2,2),a=!("Z"!=n[1][6]));var r=n[0].substr(0,4),s=parseInt(n[0].substr(4,2),10)-1,o=n[0].substr(6,2);return k.config.server_utc||a?new Date(Date.UTC(r,s,o,e,i)):new Date(r,s,o,e,i)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"},k.on_load=function(t){this.callEvent("onBeforeParse",[]);var e,i=!1,n=!1;for(var a in this._parsers){var r=this._parsers[a];if(r.canParse(t.xmlDoc.responseText,t.xmlDoc)){try{var s=t.xmlDoc.responseText;"xml"===a&&(s=t),(e=r.parse(s))||(i=!0)}catch(t){i=!0}n=!0;break}}if(!n)if(this._process&&this[this._process])try{e=this[this._process].parse(t.xmlDoc.responseText)}catch(t){i=!0}else i=!0;(i||t.xmlDoc.status&&400<=t.xmlDoc.status)&&(this.callEvent("onLoadError",[t.xmlDoc]),e=[]),this._process_loading(e),this.callEvent("onXLE",[]),this.callEvent("onParse",[])},k._process_loading=function(t){this._loading=!0,this._not_render=!0;for(var e=0;e<t.length;e++)this.callEvent("onEventLoading",[t[e]])&&this.addEvent(t[e]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},k._init_event=function(t){t.text=t.text||t._tagvalue||"",t.start_date=k._init_date(t.start_date),t.end_date=k._init_date(t.end_date)},k._init_date=function(t){return t?"string"==typeof t?k._helpers.parseDate(t):new Date(t):null},k.json={},k.json.parse=function(t){var e=[];"string"==typeof t&&(t=JSON.parse(t)),e=(e="[object Array]"===Object.prototype.toString.call(t)?t:t?t.data:[])||[],t.dhx_security&&(window.dhtmlx&&(dhtmlx.security_key=t.dhx_security),k.security_key=t.dhx_security);var i=t&&t.collections?t.collections:{},n=!1;for(var a in i)if(i.hasOwnProperty(a)){n=!0;var r=i[a],s=k.serverList[a];s||(k.serverList[a]=s=[]),s.splice(0,s.length);for(var o=0;o<r.length;o++){var d=r[o],l={key:d.value,label:d.label};for(var _ in d)if(d.hasOwnProperty(_)){if("value"==_||"label"==_)continue;l[_]=d[_]}s.push(l)}}n&&k.callEvent("onOptionsLoad",[]);for(var h=[],c=0;c<e.length;c++){var u=e[c];k._init_event(u),h.push(u)}return h},k.parse=function(t,e){this._process=e,this.on_load({xmlDoc:{responseText:t}})},k.load=function(t,e,i){"string"==typeof e&&(this._process=e,e=i),this._load_url=t,this._after_call=e,this._load(t,this._date)},k.setLoadMode=function(t){"all"==t&&(t=""),this._load_mode=t},k.serverList=function(t,e){return this.serverList[t]=e?e.slice(0):this.serverList[t]||[],this.serverList[t]},k._userdata={},k._xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;for(i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];1==n.nodeType&&(e[n.tagName]=n.firstChild?n.firstChild.nodeValue:"")}return e.text||(e.text=t.firstChild?t.firstChild.nodeValue:""),e},k.attachEvent("onXLS",function(){var t;!0===this.config.show_loading&&((t=this.config.show_loading=document.createElement("div")).className="dhx_loading",t.style.left=Math.round((this._x-128)/2)+"px",t.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(t))}),k.attachEvent("onXLE",function(){var t=this.config.show_loading;t&&"object"==typeof t&&(t.parentNode&&t.parentNode.removeChild(t),this.config.show_loading=!0)}),k._lightbox_controls={},k.formSection=function(t){for(var e=this.config.lightbox.sections,i=0;i<e.length&&e[i].name!=t;i++);var n=e[i];k._lightbox||k.getLightbox();var a=document.getElementById(n.id),r=a.nextSibling,s={section:n,header:a,node:r,getValue:function(t){return k.form_blocks[n.type].get_value(r,t||{},n)},setValue:function(t,e){return k.form_blocks[n.type].set_value(r,t,e||{},n)}},o=k._lightbox_controls["get_"+n.type+"_control"];return o?o(s):s},k._lightbox_controls.get_template_control=function(t){return t.control=t.node,t},k._lightbox_controls.get_select_control=function(t){return t.control=t.node.getElementsByTagName("select")[0],t},k._lightbox_controls.get_textarea_control=function(t){return t.control=t.node.getElementsByTagName("textarea")[0],t},k._lightbox_controls.get_time_control=function(t){return t.control=t.node.getElementsByTagName("select"),t},k._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},k.form_blocks={template:{render:function(t){var e=k._lightbox_controls.defaults.template,i=e?e.height:30;return"<div class='dhx_cal_ltext dhx_cal_template' style='height:"+(t.height||i||30)+"px;'></div>"},set_value:function(t,e){t.innerHTML=e||""},get_value:function(t){return t.innerHTML||""},focus:function(){}},textarea:{render:function(t){var e=k._lightbox_controls.defaults.textarea,i=e?e.height:200;return"<div class='dhx_cal_ltext' style='height:"+(t.height||i||"130")+"px;'><textarea></textarea></div>"},set_value:function(t,e){k.form_blocks.textarea._get_input(t).value=e||""},get_value:function(t){return k.form_blocks.textarea._get_input(t).value},focus:function(t){var e=k.form_blocks.textarea._get_input(t);k._focus(e,!0)},_get_input:function(t){return t.getElementsByTagName("textarea")[0]}},select:{render:function(t){for(var e=k._lightbox_controls.defaults.select,i=e?e.height:23,n="<div class='dhx_cal_ltext' style='height:"+((t.height||i||"23")+"px")+";'><select style='width:100%;'>",a=0;a<t.options.length;a++)n+="<option value='"+t.options[a].key+"'>"+t.options[a].label+"</option>";return n+"</select></div>"},set_value:function(t,e,i,n){var a=t.firstChild;!a._dhx_onchange&&n.onchange&&(a.onchange=n.onchange,a._dhx_onchange=!0),void 0===e&&(e=(a.options[0]||{}).value),a.value=e||""},get_value:function(t){return t.firstChild.value},focus:function(t){var e=t.firstChild;k._focus(e,!0)}},time:{render:function(t){t.time_format||(t.time_format=["%H:%i","%d","%m","%Y"]),t._time_format_order={};var e=t.time_format,i=k.config,n=k.date.date_part(k._currentDate()),a=1440,r=0;k.config.limit_time_select&&(a=60*i.last_hour+1,r=60*i.first_hour,n.setHours(i.first_hour));for(var s="",o=0;o<e.length;o++){var d=e[o];0<o&&(s+=" ");var l="",_="";switch(d){case"%Y":var h,c,u;l="dhx_lightbox_year_select",t._time_format_order[3]=o,t.year_range&&(isNaN(t.year_range)?t.year_range.push&&(c=t.year_range[0],u=t.year_range[1]):h=t.year_range),h=h||10;var f=f||Math.floor(h/2);c=c||n.getFullYear()-f,u=u||c+h;for(var g=c;g<u;g++)_+="<option value='"+g+"'>"+g+"</option>";break;case"%m":l="dhx_lightbox_month_select",t._time_format_order[2]=o;for(g=0;g<12;g++)_+="<option value='"+g+"'>"+this.locale.date.month_full[g]+"</option>";break;case"%d":l="dhx_lightbox_day_select",t._time_format_order[1]=o;for(g=1;g<32;g++)_+="<option value='"+g+"'>"+g+"</option>";break;case"%H:%i":l="dhx_lightbox_time_select",t._time_format_order[0]=o;g=r;var v=n.getDate();for(t._time_values=[];g<a;)_+="<option value='"+g+"'>"+this.templates.time_picker(n)+"</option>",t._time_values.push(g),n.setTime(n.valueOf()+60*this.config.time_step*1e3),g=24*(n.getDate()!=v?1:0)*60+60*n.getHours()+n.getMinutes()}if(_){var m=k._waiAria.lightboxSelectAttrString(d);s+="<select class='"+l+"' "+(t.readonly?"disabled='disabled'":"")+m+">"+_+"</select> "}}var p=k._lightbox_controls.defaults.select;return"<div style='height:"+((p?p.height:23)||30)+"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>"+s+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+s+"</div>"},set_value:function(e,t,i,l){function n(t,e,i){for(var n=l._time_values,a=60*i.getHours()+i.getMinutes(),r=a,s=!1,o=0;o<n.length;o++){var d=n[o];if(d===a){s=!0;break}d<a&&(r=d)}t[e+_[0]].value=s?a:r,s||r||(t[e+_[0]].selectedIndex=-1),t[e+_[1]].value=i.getDate(),t[e+_[2]].value=i.getMonth(),t[e+_[3]].value=i.getFullYear()}var a,r,s=k.config,o=e.getElementsByTagName("select"),_=l._time_format_order;if(s.full_day){if(!e._full_day){var d="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+k.locale.labels.full_day+"&nbsp;</label></input>";k.config.wide_form||(d=e.previousSibling.innerHTML+d),e.previousSibling.innerHTML=d,
e._full_day=!0}var h=e.previousSibling.getElementsByTagName("input")[0];h.checked=0===k.date.time_part(i.start_date)&&0===k.date.time_part(i.end_date),o[_[0]].disabled=h.checked,o[_[0]+o.length/2].disabled=h.checked,h.onclick=function(){if(h.checked){var t={};k.form_blocks.time.get_value(e,t,l),a=k.date.date_part(t.start_date),(+(r=k.date.date_part(t.end_date))==+a||+a<=+r&&(0!==i.end_date.getHours()||0!==i.end_date.getMinutes()))&&(r=k.date.add(r,1,"day"))}else r=a=null;o[_[0]].disabled=h.checked,o[_[0]+o.length/2].disabled=h.checked,n(o,0,a||i.start_date),n(o,4,r||i.end_date)}}if(s.auto_end_date&&s.event_duration)for(var c=function(){a=new Date(o[_[3]].value,o[_[2]].value,o[_[1]].value,0,o[_[0]].value),r=new Date(a.getTime()+60*k.config.event_duration*1e3),n(o,4,r)},u=0;u<4;u++)o[u].onchange=c;n(o,0,i.start_date),n(o,4,i.end_date)},get_value:function(t,e,i){var n=t.getElementsByTagName("select"),a=i._time_format_order;if(e.start_date=new Date(n[a[3]].value,n[a[2]].value,n[a[1]].value,0,n[a[0]].value),e.end_date=new Date(n[a[3]+4].value,n[a[2]+4].value,n[a[1]+4].value,0,n[a[0]+4].value),!n[a[3]].value||!n[a[3]+4].value){var r=k.getEvent(k._lightbox_id);r&&(e.start_date=r.start_date,e.end_date=r.end_date)}return e.end_date<=e.start_date&&(e.end_date=k.date.add(e.start_date,k.config.time_step,"minute")),{start_date:new Date(e.start_date),end_date:new Date(e.end_date)}},focus:function(t){k._focus(t.getElementsByTagName("select")[0])}}},k._setLbPosition=function(t){if(t){var e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,n=window.innerHeight||document.documentElement.clientHeight;t.style.top=e?Math.round(e+Math.max((n-t.offsetHeight)/2,0))+"px":Math.round(Math.max((n-t.offsetHeight)/2,0)+9)+"px",document.documentElement.scrollWidth>document.body.offsetWidth?t.style.left=Math.round(i+(document.body.offsetWidth-t.offsetWidth)/2)+"px":t.style.left=Math.round((document.body.offsetWidth-t.offsetWidth)/2)+"px"}},k.showCover=function(t){t&&(t.style.display="block",this._setLbPosition(t)),k.config.responsive_lightbox&&(document.documentElement.classList.add("dhx_cal_overflow_container"),document.body.classList.add("dhx_cal_overflow_container")),this.show_cover()},k.showLightbox=function(t){if(t){if(!this.callEvent("onBeforeLightbox",[t]))return void(this._new_event&&(this._new_event=null));var e=this.getLightbox();this.showCover(e),this._fill_lightbox(t,e),this._waiAria.lightboxVisibleAttr(e),this.callEvent("onLightbox",[t])}},k._fill_lightbox=function(t,e){var i=this.getEvent(t),n=e.getElementsByTagName("span"),a=[];if(k.templates.lightbox_header){a.push("");var r=k.templates.lightbox_header(i.start_date,i.end_date,i);a.push(r),n[1].innerHTML="",n[2].innerHTML=r}else{var s=this.templates.event_header(i.start_date,i.end_date,i),o=(this.templates.event_bar_text(i.start_date,i.end_date,i)||"").substr(0,70);a.push(s),a.push(o),n[1].innerHTML=s,n[2].innerHTML=o}this._waiAria.lightboxHeader(e,a.join(" "));for(var d=this.config.lightbox.sections,l=0;l<d.length;l++){var _=d[l],h=k._get_lightbox_section_node(_),c=this.form_blocks[_.type],u=void 0!==i[_.map_to]?i[_.map_to]:_.default_value;c.set_value.call(this,h,u,i,_),d[l].focus&&c.focus.call(this,h)}k._lightbox_id=t},k._get_lightbox_section_node=function(t){return document.getElementById(t.id).nextSibling},k._lightbox_out=function(t){for(var e=this.config.lightbox.sections,i=0;i<e.length;i++){var n=document.getElementById(e[i].id);n=n?n.nextSibling:n;var a=this.form_blocks[e[i].type].get_value.call(this,n,t,e[i]);"auto"!=e[i].map_to&&(t[e[i].map_to]=a)}return t},k._empty_lightbox=function(t){var e=k._lightbox_id,i=this.getEvent(e);this.getLightbox(),this._lame_copy(i,t),this.setEvent(i.id,i),this._edit_stop_event(i,!0),this.render_view_data()},k.hide_lightbox=function(){k.endLightbox(!1,this.getLightbox())},k.hideLightbox=k.hide_lightbox,k.hideCover=function(t){t&&(t.style.display="none"),this.hide_cover(),k.config.responsive_lightbox&&(document.documentElement.classList.remove("dhx_cal_overflow_container"),document.body.classList.remove("dhx_cal_overflow_container"))},k.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},k.set_cover_height=function(){var t=void 0!==document.height?document.height:document.body.offsetHeight,e=document.documentElement?document.documentElement.scrollHeight:0;Math.max(t,e)},k.show_cover=function(){this._cover||(this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover",this.set_cover_height(this._cover.style.height),document.body.appendChild(this._cover))},k.save_lightbox=function(){var t=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));this.checkEvent("onEventSave")&&!this.callEvent("onEventSave",[this._lightbox_id,t,this._new_event])||(this._empty_lightbox(t),this.hide_lightbox())},k.startLightbox=function(t,e){this._lightbox_id=t,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=e,this.showCover(e)},k.endLightbox=function(t,e){e=e||k.getLightbox();var i=k.getEvent(this._lightbox_id);i&&this._edit_stop_event(i,t),t&&k.render_view_data(),this.hideCover(e),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(e),this.callEvent("onAfterLightbox",[])},k.resetLightbox=function(){k._lightbox&&!k._custom_lightbox&&k._lightbox.parentNode.removeChild(k._lightbox),k._lightbox=null},k.cancel_lightbox=function(){this.callEvent("onEventCancel",[this._lightbox_id,this._new_event]),this.hide_lightbox()},k._init_lightbox_events=function(){this.getLightbox().onclick=function(t){var e=t?t.target:event.srcElement;if(e.className||(e=e.previousSibling),!(e&&e.className&&-1<k._getClassName(e).indexOf("dhx_btn_set"))||(e=e.querySelector("[dhx_button]"))){var i=k._getClassName(e);if(e&&i)switch(i){case"dhx_save_btn":k.save_lightbox();break;case"dhx_delete_btn":var n=k.locale.labels.confirm_deleting;k._dhtmlx_confirm(n,k.locale.labels.title_confirm_deleting,function(){k.deleteEvent(k._lightbox_id),k._new_event=null,k.hide_lightbox()});break;case"dhx_cancel_btn":k.cancel_lightbox();break;default:var a,r;if(e.getAttribute("dhx_button"))k.callEvent("onLightboxButton",[i,e,t]);else-1!=i.indexOf("dhx_custom_button")&&(-1!=i.indexOf("dhx_custom_button_")?(a=e.parentNode.getAttribute("index"),r=e.parentNode.parentNode):(a=e.getAttribute("index"),r=e.parentNode,e=e.firstChild)),a&&k.form_blocks[k.config.lightbox.sections[a].type].button_click(a,e,r,r.nextSibling)}}},this.getLightbox().onkeydown=function(t){var e=t||window.event,i=t.target||t.srcElement,n=i.querySelector("[dhx_button]");switch(n||(n=i.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(t||e).keyCode){case 32:if((t||e).shiftKey)return;n&&n.click&&n.click();break;case k.keys.edit_save:if((t||e).shiftKey)return;n&&n.click?n.click():k.save_lightbox();break;case k.keys.edit_cancel:k.cancel_lightbox()}}},k.setLightboxSize=function(){var t=this._lightbox;if(t){var e=t.childNodes[1];e.style.height="0px",e.style.height=e.scrollHeight+"px",t.style.height=e.scrollHeight+k.xy.lightbox_additional_height+"px",e.style.height=e.scrollHeight+"px"}},k._init_dnd_events=function(){k.event(document.body,"mousemove",k._move_while_dnd),k.event(document.body,"mouseup",k._finish_dnd),k._init_dnd_events=function(){}},k._move_while_dnd=function(t){if(k._dnd_start_lb){document.dhx_unselectable||(document.body.className+=" dhx_unselectable",document.dhx_unselectable=!0);var e=k.getLightbox(),i=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY];e.style.top=k._lb_start[1]+i[1]-k._dnd_start_lb[1]+"px",e.style.left=k._lb_start[0]+i[0]-k._dnd_start_lb[0]+"px"}},k._ready_to_dnd=function(t){var e=k.getLightbox();k._lb_start=[parseInt(e.style.left,10),parseInt(e.style.top,10)],k._dnd_start_lb=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY]},k._finish_dnd=function(){k._lb_start&&(k._lb_start=k._dnd_start_lb=!1,document.body.className=document.body.className.replace(" dhx_unselectable",""),document.dhx_unselectable=!1)},k.getLightbox=function(){if(!this._lightbox){var t=document.createElement("div");t.className="dhx_cal_light",k.config.wide_form&&(t.className+=" dhx_cal_light_wide"),k.form_blocks.recurring&&(t.className+=" dhx_cal_light_rec"),k.config.rtl&&(t.className+=" dhx_cal_light_rtl"),k.config.responsive_lightbox&&(t.className+=" dhx_cal_light_responsive"),/msie|MSIE 6/.test(navigator.userAgent)&&(t.className+=" dhx_ie6"),t.style.visibility="hidden";for(var e=this._lightbox_template,i=this.config.buttons_left,n=0;n<i.length;n++)e+="<div "+this._waiAria.lightboxButtonAttrString(i[n])+" class='dhx_btn_set dhx_"+(k.config.rtl?"right":"left")+"_btn_set "+i[n]+"_set'><div dhx_button='1' class='"+i[n]+"'></div><div>"+k.locale.labels[i[n]]+"</div></div>";i=this.config.buttons_right;var a=k.config.rtl;for(n=0;n<i.length;n++)e+="<div "+this._waiAria.lightboxButtonAttrString(i[n])+" class='dhx_btn_set dhx_"+(a?"left":"right")+"_btn_set "+i[n]+"_set' style='float:"+(a?"left":"right")+";'><div dhx_button='1' class='"+i[n]+"'></div><div>"+k.locale.labels[i[n]]+"</div></div>";e+="</div>",t.innerHTML=e,k.config.drag_lightbox&&(t.firstChild.onmousedown=k._ready_to_dnd,t.firstChild.onselectstart=function(){return!1},t.firstChild.style.cursor="move",k._init_dnd_events()),this._waiAria.lightboxAttr(t),document.body.insertBefore(t,document.body.firstChild),this._lightbox=t;var r=this.config.lightbox.sections;e="";for(n=0;n<r.length;n++){var s=this.form_blocks[r[n].type];if(s){r[n].id="area_"+this.uid();var o="";if(r[n].button)o="<div "+k._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+r[n].button])+" class='dhx_custom_button' index='"+n+"'><div class='dhx_custom_button_"+r[n].button+"'></div><div>"+this.locale.labels["button_"+r[n].button]+"</div></div>";this.config.wide_form&&(e+="<div class='dhx_wrap_section'>");var d=this.locale.labels["section_"+r[n].name];"string"!=typeof d&&(d=r[n].name),e+="<div id='"+r[n].id+"' class='dhx_cal_lsection'>"+o+"<label>"+d+"</label></div>"+s.render.call(this,r[n]),e+="</div>"}}var l=t.getElementsByTagName("div");for(n=0;n<l.length;n++){var _=l[n];if("dhx_cal_larea"==k._getClassName(_)){_.innerHTML=e;break}}k._bindLightboxLabels(r),this.setLightboxSize(),this._init_lightbox_events(this),t.style.display="none",t.style.visibility="visible"}return this._lightbox},k._bindLightboxLabels=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.id&&document.getElementById(i.id)){for(var n=document.getElementById(i.id).querySelector("label"),a=k._get_lightbox_section_node(i);a&&!a.querySelector;)a=a.nextSibling;var r=!0;if(a){var s=a.querySelector("input, select, textarea");s&&(i.inputId=s.id||"input_"+k.uid(),s.id||(s.id=i.inputId),n.setAttribute("for",i.inputId),r=!1)}r&&k.form_blocks[i.type].focus&&(n.onclick=function(i){return function(){var t=k.form_blocks[i.type],e=k._get_lightbox_section_node(i);t&&t.focus&&t.focus.call(k,e)}}(i))}}},k.attachEvent("onEventIdChange",function(t,e){this._lightbox_id==t&&(this._lightbox_id=e)}),k._lightbox_template="<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>",k._init_touch_events=function(){if(this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))&&!window.MSStream&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch(a){t=!1}t?this._touch_events(["touchmove","touchstart","touchend"],function(t){return t.touches&&1<t.touches.length?null:t.touches[0]?{target:t.target,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(t){return"mouse"==t.pointerType?null:t},function(t){return!t||"mouse"==t.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t},function(t){return!t||t.pointerType==t.MSPOINTER_TYPE_MOUSE})}},k._touch_events=function(t,s,o){function e(t,e,i){t.addEventListener(e,function(t){return!!k._is_lightbox_open()||(o(t)?void 0:i(t))},{passive:!1})}function i(t,e,i,n){if(!t||!e)return!1;for(var a=t.target;a&&a!=k._obj;)a=a.parentNode;if(a!=k._obj)return!1;if(k.matrix&&k.matrix[k.getState().mode]&&k.matrix[k.getState().mode].scrollable)return!1;var r=Math.abs(t.pageY-e.pageY),s=Math.abs(t.pageX-e.pageX);return r<n&&i<s&&(!r||3<s/r)&&(t.pageX>e.pageX?k._click.dhx_cal_next_button():k._click.dhx_cal_prev_button(),!0)}function n(t){if(!o(t)){var e=k.getState().drag_mode,r=!!k.matrix&&k.matrix[k._mode],i=k.render_view_data;return"create"==e&&r&&(k.render_view_data=function(){for(var t=k.getState().drag_id,e=k.getEvent(t),i=r.y_property,n=k.getEvents(e.start_date,e.end_date),a=0;a<n.length;a++)n[a][i]!=e[i]&&(n.splice(a,1),a--);e._sorder=n.length-1,e._count=n.length,this.render_data([e],k.getState().mode)}),k._on_mouse_move(t),"create"==e&&r&&(k.render_view_data=i),t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function a(t){o(t)||(k._hide_global_tip(),h&&(k._on_mouse_up(s(t||event)),k._temp_touch_block=!1),k._drag_id=null,k._drag_mode=null,k._drag_pos=null,k._pointerDragId=null,clearTimeout(_),h=u=!1,c=!0)}var d,l,_,h,c,u,f=(-1!=navigator.userAgent.indexOf("Android")&&navigator.userAgent.indexOf("WebKit"),0);e(document.body,t[0],function(t){if(!o(t)){var e=s(t);if(e){if(h)return n(e),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,k._update_global_tip(),!1;if(l=s(t),u)return l?void((d.target!=l.target||5<Math.abs(d.pageX-l.pageX)||5<Math.abs(d.pageY-l.pageY))&&(c=!0,clearTimeout(_))):void(c=!0)}}}),e(this._els.dhx_cal_data[0],"touchcancel",a),e(this._els.dhx_cal_data[0],"contextmenu",function(t){if(!o(t))return u?(t&&t.preventDefault&&t.preventDefault(),!((t||event).cancelBubble=!0)):void 0}),e(this._obj,t[1],function(t){if(!o(t)){var e;if(k._pointerDragId=t.pointerId,h=c=!1,u=!0,!(e=l=s(t)))return void(c=!0);var i=new Date;if(!c&&!h&&i-f<250)return k._click.dhx_cal_data(e),window.setTimeout(function(){e.type="dblclick",k._on_dbl_click(e)},50),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!(k._block_next_stop=!0);if(f=i,!c&&!h&&k.config.touch_drag){var n=k._locate_event(document.activeElement),a=k._locate_event(e.target),r=d?k._locate_event(d.target):null;if(n&&a&&n==a&&n!=r)return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,k._ignore_next_click=!1,k._click.dhx_cal_data(e),d=e,!1;_=setTimeout(function(){h=!0;var t=d.target,e=k._getClassName(t);t&&-1!=e.indexOf("dhx_body")&&(t=t.previousSibling),k._on_mouse_down(d,t),k._drag_mode&&"create"!=k._drag_mode&&k.for_rendered(k._drag_id,function(t,e){t.style.display="none",k._rendered.splice(e,1)}),k.config.touch_tip&&k._show_global_tip(),k.updateEvent(k._drag_id)},k.config.touch_drag),d=e}}}),e(this._els.dhx_cal_data[0],t[2],function(t){if(!o(t))return k.config.touch_swipe_dates&&!h&&i(d,l,200,100)&&(k._block_next_stop=!0),h&&(k._ignore_next_click=!0,setTimeout(function(){k._ignore_next_click=!1},100)),a(t),k._block_next_stop?(k._block_next_stop=!1,t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)):void 0}),k.event(document.body,t[2],a)},k._show_global_tip=function(){k._hide_global_tip();var t=k._global_tip=document.createElement("div");t.className="dhx_global_tip",k._update_global_tip(1),document.body.appendChild(t)},k._update_global_tip=function(t){var e=k._global_tip;if(e){var i="";if(k._drag_id&&!t){var n=k.getEvent(k._drag_id);n&&(i="<div>"+(n._timed?k.templates.event_header(n.start_date,n.end_date,n):k.templates.day_date(n.start_date,n.end_date,n))+"</div>")}"create"==k._drag_mode||"new-size"==k._drag_mode?e.innerHTML=(k.locale.labels.drag_to_create||"Drag to create")+i:e.innerHTML=(k.locale.labels.drag_to_move||"Drag to move")+i}},k._hide_global_tip=function(){var t=k._global_tip;t&&t.parentNode&&(t.parentNode.removeChild(t),k._global_tip=0)},k._dp_init=function(i){i._methods=["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],this._dp_change_event_id=function(t,e){k.getEvent(t)&&k.changeEventId(t,e)},this._dp_hook_delete=function(t,e){if(k.getEvent(t))return e&&t!=e&&("true_deleted"==this.getUserData(t,i.action_param)&&this.setUserData(t,i.action_param,"updated"),this.changeEventId(t,e)),this.deleteEvent(e,!0)},this.attachEvent("onEventAdded",function(t){!this._loading&&this._validId(t)&&i.setUpdated(t,!0,"inserted")}),this.attachEvent("onConfirmedBeforeEventDelete",function(t){if(this._validId(t)){var e=i.getState(t);return"inserted"==e||this._new_event?(i.setUpdated(t,!1),!0):"deleted"!=e&&("true_deleted"==e||(i.setUpdated(t,!0,"deleted"),!1))}}),this.attachEvent("onEventChanged",function(t){!this._loading&&this._validId(t)&&i.setUpdated(t,!0,"updated")}),k.attachEvent("onClearAll",function(){i._in_progress={},i._invalid={},i.updatedRows=[],i._waitMode=0});var a=function(t,e,i){for(var n in i=i||"",e=e||{},t)0!==n.indexOf("_")&&(t[n]&&t[n].getUTCFullYear?e[i+n]=this.obj._helpers.formatDate(t[n]):t[n]&&"object"==typeof t[n]?a.call(this,t[n],e,i+n+"."):e[i+n]=t[n]);return e},n=function(t){var e=k.utils.copy(t);for(var i in e)0===i.indexOf("_")?delete e[i]:e[i]&&(e[i].getUTCFullYear?e[i]=this.obj._helpers.formatDate(e[i]):"object"==typeof e[i]&&(e[i]=n(e[i])));return e};i._getRowData=function(t){var e=this.obj.getEvent(t);return"JSON"==this._tMode?n.call(this,e):a.call(this,e)},i._clearUpdateFlag=function(){},i.attachEvent("insertCallback",k._update_callback),i.attachEvent("updateCallback",k._update_callback),i.attachEvent("deleteCallback",function(t,e){this.obj.getEvent(e)?(this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteEvent(e)):this.obj._add_rec_marker&&this.obj._update_callback(t,e)})},k._validId=function(){return!0},k.setUserData=function(t,e,i){if(t){var n=this.getEvent(t);n&&(n[e]=i)}else this._userdata[e]=i},k.getUserData=function(t,e){if(t){var i=this.getEvent(t);return i?i[e]:null}return this._userdata[e]},k._set_event_text_style=function(t,e){if(k.getEvent(t)){this.for_rendered(t,function(t){t.style.cssText+=";"+e});var i=this.getEvent(t);i._text_style=e,this.event_updated(i)}},k._update_callback=function(t){var e=k._xmlNodeToJSON(t.firstChild);"none"==e.rec_type&&(e.rec_pattern="none"),e.text=e.text||e._tagvalue,e.start_date=k._helpers.parseDate(e.start_date),e.end_date=k._helpers.parseDate(e.end_date),k.addEvent(e),k._add_rec_marker&&k.setCurrentView()},k.getRootView=function(){return{view:{render:function(){return{tag:"div",type:1,attrs:{style:"width:100%;height:100%;"},hooks:{didInsert:function(){k.setCurrentView()}},body:[{el:this.el,type:1}]}},init:function(){var t=document.createElement("DIV");t.id="scheduler_"+k.uid(),t.style.width="100%",t.style.height="100%",t.classList.add("dhx_cal_container"),t.cmp="grid",t.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab"></div><div class="dhx_cal_tab" name="week_tab"></div><div class="dhx_cal_tab" name="month_tab"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',k.init(t),this.el=t}},type:4}},k._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},k._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},k._is_material_skin=function(){return k.skin?-1<(k.skin+"").indexOf("material"):t()},window.addEventListener("DOMContentLoaded",i),window.addEventListener("load",i),k._border_box_events=function(){return e()},k._configure=function(t,e,i){for(var n in e)void 0===t[n]&&(t[n]=e[n][i])},k._skin_init=function(){if(!k.skin)for(var t=document.getElementsByTagName("link"),e=0;e<t.length;e++){var i=t[e].href.match("dhtmlxscheduler_([a-z]+).css");if(i){k.skin=i[1];break}}var n=0;if(!k.skin||"classic"!==k.skin&&"glossy"!==k.skin||(n=1),k._is_material_skin()){var a=k.config.buttons_left.$inital,r=k.config.buttons_right.$inital;if(a&&k.config.buttons_left.slice().join()==a&&r&&k.config.buttons_right.slice().join()==r){var s=k.config.buttons_left.slice();k.config.buttons_left=k.config.buttons_right.slice(),k.config.buttons_right=s}k.xy.event_header_height=18,k.xy.week_agenda_scale_height=35,k.xy.map_icon_width=38,k._lightbox_controls.defaults.textarea.height=64,k._lightbox_controls.defaults.time.height="auto"}if(this._configure(k.config,k._skin_settings,n),this._configure(k.xy,k._skin_xy,n),"flat"===k.skin&&(k.xy.scale_height=35,k.templates.hour_scale=function(t){var e=t.getMinutes();return e=e<10?"0"+e:e,"<span class='dhx_scale_h'>"+t.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+e+"</span>"}),!n){var o=k.config.minicalendar;o&&(o.padding=14),k.templates.event_bar_date=function(t){return"\u2022 <b>"+k.templates.event_date(t)+"</b> "},k.attachEvent("onTemplatesReady",function(){var i=k.date.date_to_str("%d");k.templates._old_month_day||(k.templates._old_month_day=k.templates.month_day);var n=k.templates._old_month_day;if(k.templates.month_day=function(t){if("month"!=this._mode)return n.call(this,t);var e=i(t);return 1==t.getDate()&&(e=k.locale.date.month_full[t.getMonth()]+" "+e),+t==+k.date.date_part(this._currentDate())&&(e=k.locale.labels.dhx_cal_today_button+" "+e),e},k.config.fix_tab_position){var t=k._els.dhx_cal_navline[0].getElementsByTagName("div"),e=null,a=211,r=[14,75,136],s=14;k._is_material_skin()&&(r=[16,103,192],a=294,s=-1);for(var o=0;o<t.length;o++){var d=t[o],l=d.getAttribute("name");if(l){switch(d.style.right="auto",l){case"day_tab":d.style.left=r[0]+"px",d.className+=" dhx_cal_tab_first";break;case"week_tab":d.style.left=r[1]+"px";break;case"month_tab":d.style.left=r[2]+"px",d.className+=" dhx_cal_tab_last";break;default:d.style.left=a+"px",d.className+=" dhx_cal_tab_standalone",a=a+s+d.offsetWidth}d.className+=" "+l}else 0===(d.className||"").indexOf("dhx_minical_icon")&&d.parentNode==k._els.dhx_cal_navline[0]&&(e=d)}e&&(e.style.left=a+"px")}}),k._skin_init=function(){}}},window.jQuery&&(A=jQuery,S=0,M=[],A.fn.dhx_scheduler=function(n){if("string"!=typeof n){var a=[];return this.each(function(){if(this&&this.getAttribute)if(this.getAttribute("dhxscheduler"))a.push(window[this.getAttribute("dhxscheduler")]);else{var t="scheduler";S&&(t="scheduler"+(S+1),window[t]=Scheduler.getSchedulerInstance());var e=window[t];for(var i in this.setAttribute("dhxscheduler",t),n)"data"!=i&&(e.config[i]=n[i]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),e.init(this,e.config.date,e.config.mode),n.data&&e.parse(n.data),a.push(e),S++}}),1===a.length?a[0]:a}if(M[n])return M[n].apply(this,[]);A.error("Method "+n+" does not exist on jQuery.dhx_scheduler")}),function(){function r(t,e,i){e&&(t._date=e),i&&(t._mode=i)}var t=k.setCurrentView,s=k.updateView,o=null,d=null,e=function(t,e){var i=this;window.clearTimeout(d),window.clearTimeout(o);var n=i._date,a=i._mode;r(this,t,e),d=setTimeout(function(){i.callEvent("onBeforeViewChange",[a,n,e||i._mode,t||i._date])?(s.call(i,t,e),i.callEvent("onViewChange",[i._mode,i._date]),window.clearTimeout(o),d=0):r(i,n,a)},k.config.delay_render)},i=function(t,e){var i=this,n=arguments;r(this,t,e),window.clearTimeout(o),o=setTimeout(function(){d||s.apply(i,n)},k.config.delay_render)};k.attachEvent("onSchedulerReady",function(){k.config.delay_render?(k.setCurrentView=e,k.updateView=i):(k.setCurrentView=t,k.updateView=s)})}();for(var L=0;L<Scheduler._schedulerPlugins.length;L++)Scheduler._schedulerPlugins[L](k);return k._internal_id=Scheduler._seed++,Scheduler.$syncFactory&&Scheduler.$syncFactory(k),k}};window.scheduler=Scheduler.getSchedulerInstance(),window.Scheduler={plugin:scheduler.bind(Scheduler.plugin,Scheduler)},dhtmlx&&dhtmlx.attaches&&(dhtmlx.attaches.attachScheduler=function(t,e,i,n){i=i||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var a=document.createElement("DIV");return a.id="dhxSchedObj_"+this._genStr(12),a.innerHTML='<div id="'+a.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+i+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(a.firstChild),this.attachObject(a.id,!1,!0),this.vs[this.av].sched=n,this.vs[this.av].schedId=a.id,n.setSizes=n.updateView,n.destructor=function(){},n.init(a.id,t,e),this.vs[this._viewRestore()].sched})}();